// scripts.min.js
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,i,e,n){void 0===n&&(n=e);var s=Object.getOwnPropertyDescriptor(i,e);s&&!("get"in s?!i.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return i[e]}}),Object.defineProperty(t,n,s)}:function(t,i,e,n){void 0===n&&(n=e),t[n]=i[e]}),__exportStar=this&&this.__exportStar||function(t,i){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(i,e)||__createBinding(i,t,e)},__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,i){Object.defineProperty(t,"default",{enumerable:!0,value:i})}:function(t,i){t.default=i}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding(i,t,e);return __setModuleDefault(i,t),i},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};(()=>{const t={},i={};if(!window.define&&!window.require){const e=(i,e,n)=>{if(t[i])throw new Error("Duplicate definition for "+i);t[i]=[e,n]};e.amd={bundle:!0,dynamic:!1};const n=e=>{if("require"===e)return n;if("exports"===e)return{};if(i[e])return i[e];if(!t[e])throw new Error("No definition for "+e);const s={},o=t[e][0],r=t[e][1],h=o.map((t=>"exports"===t?s:n(t)));return r.apply(null,h),i[e]=s};window.define=e,window.require=n}window.___requireResolver=()=>{for(const e in t)if(t.hasOwnProperty(e)){const n=t[e][0];n&&n.map((n=>{if("require"!==n&&"exports"!==n&&(i.hasOwnProperty(n)||require(n),!t.hasOwnProperty(n)&&!i.hasOwnProperty(n)))throw new Error(`Failed define '${e}' dep not found '${n}'`)})),require(e),delete t[e]}}})(),define("d0",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d1",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p0=void 0;class e extends pc.ScriptType{onChangeAttr(t,i,e){return this.on(`attr:${t}`,i,e)}}i.p0=e})),define("d2",["require","exports","d0","d1"],(function(t,i,e,n){Object.defineProperty(i,"__esModule",{value:!0}),__exportStar(e,i),__exportStar(n,i)})),define("d3",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p1=i.p2=i.p3=i.p4=i.p5=i.p6=i.p7=i.p8=i.p9=i.p10=i.p11=i.p12=i.p13=i.p14=i.p15=i.p16=i.p17=i.p18=void 0,i.p18=pc.Quat,i.p17=pc.Vec2,i.p16=pc.Vec3,i.p15=pc.Mat3,i.p14=pc.Mat4,i.p13=pc.CameraComponent,i.p12=pc.GraphNode,i.p11=pc.Entity,i.p10=pc.AnimComponent,i.p9=pc.Color,i.p8=pc.Curve,i.p7=pc.AnimCurve,i.p6=pc.RigidBodyComponentSystem,i.p5=pc.RaycastResult,i.p4=pc.RigidBodyComponent,i.p3=pc.CollisionComponent,i.p2=pc.ScriptComponent,i.p1=i.p11})),define("d4",["require","exports","d2"],(function(t,i,e){function n(t,i){return t.script?t.script.get(i):null}Object.defineProperty(i,"__esModule",{value:!0}),i.p19=i.p20=i.p21=i.p22=void 0,i.p22=function(t,i){return t.script?t.script.get(i):null},i.p21=n,i.p20=function(t,i,e=3){let s=t.parent;for(let t=0;t<e;t++){if(!s)return null;const t=n(s,i);if(t)return t;s=s.parent}return null};class s extends e.p0{constructor(){super(...arguments),this.t=!1,this.initialize=()=>{this.on("destroy",this.i,this),this.on("state",this.o,this),this.on("attr",this.h,this),this.awake(),this.enabled&&this.onEnable()},this.postInitialize=()=>{this.enabled&&(this.t=!0,this.start())},this.postUpdate=t=>{this.lateUpdate(t)}}i(){this.off("destroy",this.i,this),this.off("state",this.o,this),this.off("attr",this.o,this),this.onDestroy()}h(t,i,e){return this.onChangeAttribute(t,i,e)}o(t){t&&!this.t&&(this.t=!0,this.start()),t?this.onEnable():this.onDisable()}awake(){}start(){}onEnable(){}onDisable(){}onDestroy(){}lateUpdate(t){}onChangeAttribute(t,i,e){}getComponent(t){return this.entity.script?this.entity.script.get(t):null}getComponentOrThrow(t,i){let e;if(!this.entity.script||!(e=this.entity.script.get(t)))throw i||new Error("Script not exists");return e}}i.p19=s,i.default=s})),define("d5",["require","exports","d3"],(function(t,i,e){function n(t,i,e){if(void 0===e||0==+e)return Math[t](i);if(i=+i,e=+e,isNaN(i)||"number"!=typeof e||e%1!=0)return NaN;let n=i.toString().split("e");return n=(i=Math[t](+(n[0]+"e"+(n[1]?+n[1]-e:-e)))).toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]+e:e))}function s(t,i){var o,r;if("string"==typeof t||"string"==typeof i)return t==i;if(t instanceof e.p18)return i instanceof e.p18&&t.equals(i);if(t instanceof e.p16)return i instanceof e.p16&&t.equals(i);const h=(null===(o=t.toString().split(".")[1])||void 0===o?void 0:o.length)||0,u=(null===(r=i.toString().split(".")[1])||void 0===r?void 0:r.length)||0;if(h>0){const e=n("ceil",i,-h);return 100*Math.abs((e-t)/t)<1}if(u>0){const e=n("ceil",i,0);return 100*Math.abs((e-t)/t)<1}if("object"==typeof t){if(t===i)return!0;if("object"!=typeof i)return!1;const e=Object.keys(t);for(let n of e)if(!s(t[n],i[n]))return!1;return!0}return t==i}Object.defineProperty(i,"__esModule",{value:!0}),i.u=i.l=i.p=void 0,e.p18.prototype.equals=function(t){return!!(s(this.x,t.x)&&s(this.y,t.y)&&s(this.z,t.z)&&s(this.w,t.w))},e.p16.prototype.equals=function(t){return!!s(this.x,t.x)&&!!s(this.y,t.y)&&!!s(this.z,t.z)},i.p=s,window.__test__debug__stack={};let o={};i.l=function(t,i){return o[t]=i,i},i.u=function(t,i,e){o={};const n=window.__test__debug__stack,r=Object.keys(n),h=e();if(r.length>0)for(const t in r)if(t in o){const i=n[t],e=o[t];s(i,e)||console.error(`${t} invalid value:`,i,e)}window.__test__debug__stack={},h.status||console.error({code:t,targetResult:i,codeResult:h.result})}})),define("d6",["require","exports","d3"],(function(t,i,e){function n(t,i,e,n,s){return t.x=i,t.y=e,t.z=n,t.w=s,t}function s(t,i){return t.x=i.x,t.y=i.y,t.z=i.z,t.w=i.w,t}function o(t){return new e.p18(t.x,t.y,t.z,t.w)}Object.defineProperty(i,"__esModule",{value:!0}),i.p23=i.p24=i.p25=void 0,i.p25=n,i.p24=s,i.p23=o,i.default={set:n,assign:s,clone:o}})),define("d7",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p26=i.p27=i.p28=i.p29=i.p30=i.p31=i.p32=i.p33=i.p34=i.p35=i.p36=i.p37=i.p38=i.p39=i.p40=i.p41=i.p42=i.p43=i.p44=i.p45=i.p46=i.p47=i.p48=i.p49=i.p50=i.p51=i.p52=i.p53=i.p54=i.p55=i.p56=i.p57=i.p58=i.p59=i.p60=i.p61=i.p62=i.p63=i.p64=i.p65=i.p66=i.p67=i.p68=i.p69=i.p70=i.p71=i.p72=i.p73=i.p74=i.p75=i.p76=i.p77=i.p78=i.p79=i.p80=void 0,i.p80=globalThis.Math.E,i.p79=globalThis.Math.LN10,i.p78=globalThis.Math.LN2,i.p77=globalThis.Math.LOG2E,i.p76=globalThis.Math.LOG10E,i.p75=globalThis.Math.PI,i.p74=globalThis.Math.SQRT1_2,i.p73=globalThis.Math.SQRT2,i.p72=globalThis.Infinity,i.p71=Number.POSITIVE_INFINITY,i.p70=Number.NEGATIVE_INFINITY,i.p69=globalThis.Math.abs,i.p68=globalThis.Math.acos,i.p67=globalThis.Math.asin,i.p66=globalThis.Math.atan,i.p65=globalThis.Math.atan2,i.p64=globalThis.Math.ceil,i.p63=globalThis.Math.cos,i.p62=globalThis.Math.exp,i.p61=globalThis.Math.floor,i.p60=globalThis.Math.log,i.p59=globalThis.Math.max,i.p58=globalThis.Math.min,i.p57=globalThis.Math.pow,i.p56=globalThis.Math.round,i.p55=globalThis.Math.sin,i.p54=globalThis.Math.sqrt,i.p53=globalThis.Math.tan,i.p52=globalThis.Math.random,i.p51=Number.EPSILON,i.p50=1e-5,i.p49=1e-15,i.p48=1/(0,i.p54)(3),i.p47=i.p75/180,i.p46=360/(2*i.p75),i.p45=t=>t>=0?1:-1,i.p44=(t,e)=>(0,i.p43)(t-(0,i.p61)(t/e)*e,0,e),i.p43=(t,i,e)=>t<i?i:t>e?e:t,i.p42=t=>t<0?0:t>1?1:t,i.p41=(t,e,n)=>t+(e-t)*(0,i.p42)(n),i.p40=(t,i,e)=>t+(i-t)*e,i.p39=(t,e,n)=>{let s=(0,i.p44)(e-t,360);return s>180&&(s-=360),t+s*(0,i.p42)(n)},i.p38=(t,e,n)=>(0,i.p69)(e-t)<=n?e:t+(0,i.p45)(e-t)*n,i.p37=(t,e,n)=>{const s=(0,i.p30)(t,e);return 0-n<s&&s<n?e:(e=t+s,(0,i.p38)(t,e,n))},i.p36=(t,e,n)=>e*(n=-2*(n=(0,i.p42)(n))*n*n+3*n*n)+t*(1-n),i.p35=(t,e,n)=>{const s=t<0,o=(0,i.p69)(t);if(o>e)return s?0-o:o;const r=(0,i.p57)(o/e,n)*e;return s?0-r:r},i.p34=(t,e)=>(0,i.p69)(e-t)<(0,i.p59)(1e-6*(0,i.p59)((0,i.p69)(t),(0,i.p69)(e)),8*i.p51),i.p33=(t,e,n,s,o,r)=>{const h=2/(s=(0,i.p59)(1e-4,s)),u=h*r,c=1/(1+u+.48*u*u+.235*u*u*u);let a=t-e;const l=e,f=o*s;a=(0,i.p43)(a,-f,f),e=t-a;const p=(n.currentVelocity+h*a)*r;n.currentVelocity=(n.currentVelocity-h*p)*c;let d=e+(a+p)*c;return l-t>0==d>l&&(d=l,n.currentVelocity=(d-l)/r),d},i.p32=(t,e)=>(t=(0,i.p44)(t,2*e),e-(0,i.p69)(t-e)),i.p31=(t,e,n)=>t!=e?(0,i.p42)((n-t)/(e-t)):0,i.p30=(t,e)=>{let n=(0,i.p44)(e-t,360);return n>180&&(n-=360),n},i.p29=(t,i,e)=>t>i||t<-i?t:e,i.p28=(t,e=.001)=>(0,i.p69)(t)<e,i.p27=(t,e=.001)=>(0,i.p69)(t)>e,i.p26={p80:i.p80,p79:i.p79,p78:i.p78,p77:i.p77,p76:i.p76,p75:i.p75,p74:i.p74,p73:i.p73,p69:i.p69,p68:i.p68,p67:i.p67,p66:i.p66,p65:i.p65,p64:i.p64,p63:i.p63,p62:i.p62,p61:i.p61,p60:i.p60,p59:i.p59,p58:i.p58,p57:i.p57,p56:i.p56,p55:i.p55,p54:i.p54,p53:i.p53,p52:i.p52,p72:i.p72,p71:i.p71,p70:i.p70,p48:i.p48,p51:i.p51,p47:i.p47,p46:i.p46,p45:i.p45,p44:i.p44,p43:i.p43,p42:i.p42,p41:i.p41,p40:i.p40,p39:i.p39,p38:i.p38,p37:i.p37,p36:i.p36,p35:i.p35,p34:i.p34,p33:i.p33,p32:i.p32,p31:i.p31,p30:i.p30,p29:i.p29,p28:i.p28,p27:i.p27},i.default=i.p26})),define("d8",["require","exports","d3"],(function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.p81=i.p82=i.p83=void 0,i.p83={zero:Object.freeze(new e.p16(0,0,0)),one:Object.freeze(new e.p16(1,1,1)),up:Object.freeze(new e.p16(0,1,0)),down:Object.freeze(new e.p16(0,-1,0)),left:Object.freeze(new e.p16(-1,0,0)),right:Object.freeze(new e.p16(1,0,0)),forward:Object.freeze(new e.p16(0,0,1)),back:Object.freeze(new e.p16(0,0,-1)),positiveInfinity:Object.freeze(new e.p16(globalThis.Number.POSITIVE_INFINITY,globalThis.Number.POSITIVE_INFINITY,globalThis.Number.POSITIVE_INFINITY)),negativeInfinity:Object.freeze(new e.p16(globalThis.Number.NEGATIVE_INFINITY,globalThis.Number.NEGATIVE_INFINITY,globalThis.Number.NEGATIVE_INFINITY))},i.p82=!1,i.p81={zero:i.p82?i.p83.zero:e.p16.ZERO,one:i.p82?i.p83.one:e.p16.ONE,forward:i.p82?i.p83.forward:e.p16.FORWARD,back:i.p82?i.p83.back:e.p16.BACK,up:i.p82?i.p83.up:e.p16.UP,down:i.p82?i.p83.down:e.p16.DOWN,left:i.p82?i.p83.left:e.p16.LEFT,right:i.p82?i.p83.right:e.p16.RIGHT,positiveInfinity:i.p83.positiveInfinity,negativeInfinity:i.p83.negativeInfinity},i.default=i.p81})),define("d9",["require","exports","d3","d7","d8","d6"],(function(t,i,e,n,s,o){function r(t,i,e,n){return t.x=i,t.y=e,t.z=n,t}function h(t,i){return t.x=i.x,t.y=i.y,t.z=i.z,t}function u(t){return new e.p16(t.x,t.y,t.z)}function c(t,i=new e.p16){const s=t.x*t.x+t.y*t.y+t.z*t.z,o=n.default.p54(s);return 0!==o?r(i,t.x/o,t.y/o,t.z/o):h(i,t)}function a(t){const i=t.x*t.x+t.y*t.y+t.z*t.z,e=n.default.p54(i);return 0!==e?(t.x/=e,t.y/=e,t.z/=e,t):t}function l(t,i,s=new e.p16){if(0===t.x&&0===t.z&&0===t.z||0===i)return r(s,0,0,0);const o=t.x*t.x+t.y*t.y+t.z*t.z,u=n.default.p54(o);return 0!==i?r(s,t.x/u*i,t.y/u*i,t.z/u*i):h(s,t)}function f(t,i){return l(t,i,t)}function p(t,i,n=new e.p16){return r(n,t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)}function d(t,i){return p(t,i,t)}function _(t,i){return p(t,i,i)}function m(t,i,n=new e.p16){const s=t.x*i.x+t.y*i.y+t.z*i.z,o=i.x*s*2,h=i.y*s*2,u=i.z*s*2;return r(n,t.x-o,t.y-h,t.z-u)}function w(t,i){return m(t,i,t)}function b(t,i){const e=t.x-i.x,s=t.y-i.y,o=t.z-i.z,r=e*e+s*s+o*o;return n.default.p54(r)}function v(t,i,s=new e.p16){const o=Rt(t);if(o>i*i){const e=n.default.p54(o);return r(s,t.x/e*i,t.y/e*i,t.z/e*i)}return h(s,t)}function y(t,i){return v(t,i,t)}function g(t,i){const e=t.x-i.x,n=t.y-i.y,s=t.z-i.z;return e*e+n*n+s*s}function x(t,i){return t.x*i.x+t.y*i.y+t.z*i.z}function M(t,i,n=new e.p16){return r(n,t.x<i.x?t.x:i.x,t.y<i.y?t.y:i.y,t.z<i.z?t.z:i.z)}function D(t,i){return M(t,i,t)}function S(t,i,n=new e.p16){return r(n,t.x>i.x?t.x:i.x,t.y>i.y?t.y:i.y,t.z>i.z?t.z:i.z)}function A(t,i){return S(t,i,t)}function O(t,i=new e.p16){return r(i,n.default.p69(t.x),n.default.p69(t.y),n.default.p69(t.z))}function j(t){return O(t,t)}function C(t,i,n,s=new e.p16){let o=t.x;o=o>n.x?n.x:o,o=o<i.x?i.x:o;let h=t.y;h=h>n.y?n.y:h,h=h<i.y?i.y:h;let u=t.z;return u=u>n.z?n.z:u,u=u<i.z?i.z:u,r(s,o,h,u)}function T(t,i,e){return C(t,i,e,t)}function q(t,i,n,s=new e.p16){return r(s,t.x+(i.x-t.x)*n,t.y+(i.y-t.y)*n,t.z+(i.z-t.z)*n)}function P(t,i,e){return q(t,i,e,t)}function k(t,i,e){return q(t,i,e,i)}function R(t,i,s,o=new e.p16){return q(t,i,s=n.default.p42(s),o)}function E(t,i,e){return R(t,i,e,t)}function F(t,i,e){return R(t,i,e,i)}function I(t,i=new e.p16){return t.x>=n.default.p48?r(i,t.y,-t.x,0):r(i,0,t.z,-t.y)}function V(t,i,n=new e.p16){const s=i.x,o=i.y,h=i.z,u=t.x,c=t.y,a=t.z,l=t.w,f=l*s+c*h-a*o,p=l*o+a*s-u*h,d=l*h+u*o-c*s,_=-u*s-c*o-a*h;return r(n,f*l+_*-u+p*-a-d*-c,p*l+_*-c+d*-u-f*-a,d*l+_*-a+f*-c-p*-u)}function H(t,i){return V(t,i,i)}function N(t,i=!0,s=new e.p16){let o=t.x*t.x+t.y*t.y;if(o>0){const e=i?1/n.default.p54(o):1;return r(s,-t.y*e,t.x*e,0)}o=t.y*t.y+t.z*t.z;const h=i?1/n.default.p54(o):1;return r(s,0,-t.z*h,t.y*h)}Object.defineProperty(i,"__esModule",{value:!0}),i.p84=i.p85=i.p86=i.p33=i.p87=i.p88=i.p89=i.p90=i.p91=i.p38=i.p92=i.p93=i.p94=i.p95=i.p96=i.p97=i.p98=i.p99=i.p100=i.p101=i.p102=i.p103=i.p104=i.p105=i.p106=i.p107=i.p108=i.p109=i.p110=i.p111=i.p112=i.p113=i.p114=i.p115=i.p116=i.p117=i.p118=i.p119=i.p120=i.p121=i.p122=i.p123=i.p124=i.p125=i.p126=i.p127=i.p128=i.p129=i.p130=i.p131=i.p132=i.p133=i.p134=i.p135=i.p136=i.p137=i.p138=i.p139=i.p140=i.p141=i.p142=i.p143=i.p144=i.p145=i.p146=i.p147=i.p148=i.p149=i.p41=i.p150=i.p151=i.p40=i.p152=i.p153=i.p154=i.p43=i.p155=i.p69=i.p156=i.p157=i.p59=i.p158=i.p58=i.p159=i.p160=i.p161=i.p162=i.p163=i.p164=i.p165=i.p166=i.p167=i.p168=i.p169=i.p170=i.p171=i.p172=i.p173=i.p23=i.p24=i.p25=void 0,n=__importStar(n),o=__importDefault(o),i.p25=r,i.p24=h,i.p23=u,i.p173=c,i.p172=a,i.p171=l,i.p170=f,i.p169=p,i.p168=d,i.p167=_,i.p166=m,i.p165=w,i.p164=function(t,i){return m(t,i,i)},i.p163=b,i.p162=v,i.p161=y,i.p160=g,i.p159=x,i.p58=M,i.p158=D,i.p59=S,i.p157=A,i.p156=function(t,i){return S(t,i,i)},i.p69=O,i.p155=j,i.p43=C,i.p154=T,i.p153=function(t,i,e){return C(t,i,e,i)},i.p152=function(t,i,e){return C(t,i,e,e)},i.p40=q,i.p151=P,i.p150=k,i.p41=R,i.p149=E,i.p148=F,i.p147=I,i.p146=function(t){return I(t,t)},i.p145=V,i.p144=H,i.p143=N,i.p142=function(t,i=!0){return N(t,i,t)};const B=new e.p16;function z(t,i,s,o=new e.p16){const r=kt(t),u=kt(i),c=h(B,t),a=h(o,i);mt(a,u),mt(c,r);const l=(u-r)*s+r,f=x(c,a);let p=1-s,d=s;if(1-f>1e-6){const t=n.default.p68(f),i=n.default.p55(t);p=n.default.p55((1-s)*t)/i,d=n.default.p55(s*t)/i}return ct(c,p),ct(a,d),tt(a,c),ct(a,l),o}function G(t,i,e){return z(t,i,e,t)}function U(t,i,e){return z(t,i,e,i)}function W(t,i,n,s=new e.p16){return n<=0?h(s,t):n>=1?h(s,i):z(t,i,n,s)}function L(t,i,e){return W(t,i,e,t)}function J(t,i,e){return W(t,i,e,i)}i.p141=z,i.p140=G,i.p139=U,i.p138=W,i.p137=L,i.p136=J;const $=new e.p16;function Z(t,i,s,o=new e.p16){const r=kt(t),u=kt(i),c=h($,t),l=h(o,i);mt(l,u),mt(c,r);const f=x(c,l),p=(u-r)*s+r,d=n.default.p68(f)*s;return nt(l,ut(c,f)),a(l),ct(l,n.default.p55(d)),ct(c,n.default.p63(d)),tt(l,c),a(l),ct(l,p),o}function K(t,i){return t.x===i.x&&t.y===i.y&&t.z===i.z}function Q(t,i){return t.x!==i.x||t.y!==i.y||t.z!==i.z}function Y(t,i=new e.p16){return r(i,n.default.p54(t.x),n.default.p54(t.y),n.default.p54(t.z))}function X(t,i,n=new e.p16){return r(n,t.x+i.x,t.y+i.y,t.z+i.z)}function tt(t,i){return X(t,i,t)}function it(t,i){return X(t,i,i)}function et(t,i,n=new e.p16){return r(n,t.x-i.x,t.y-i.y,t.z-i.z)}function nt(t,i){return et(t,i,t)}function st(t,i){return et(t,i,i)}function ot(t,i,n=new e.p16){return r(n,t.x*i.x,t.y*i.y,t.z*i.z)}function rt(t,i){return ot(t,i,t)}function ht(t,i){return ot(t,i,i)}function ut(t,i,n=new e.p16){return r(n,t.x*i,t.y*i,t.z*i)}function ct(t,i){return ut(t,i,t)}function at(t,i,n=new e.p16){return r(n,t*i.x,t*i.y,t*i.z)}function lt(t,i){return at(t,i,i)}function ft(t,i,n=new e.p16){return r(n,t.x/i.x,t.y/i.y,t.z/i.z)}function pt(t,i){return ft(t,i,t)}function dt(t,i){return ft(t,i,i)}function _t(t,i,n=new e.p16){return r(n,t.x/i,t.y/i,t.z/i)}function mt(t,i){return _t(t,i,t)}function wt(t,i,n=new e.p16){return r(n,t/i.x,t/i.y,t/i.z)}function bt(t,i){return wt(t,i,i)}function vt(t,i=new e.p16){return r(i,-t.x,-t.y,-t.z)}function yt(t){return vt(t,t)}function gt(t,i){return a(t),nt(i,ut(t,x(i,t))),a(i),{refNormal:t,refTangent:i}}function xt(t,i){const e=n.default.p54(Rt(t)*Rt(i));if(e<n.p49)return 0;const s=x(t,i),o=n.default.p43(s/e,-1,1);return n.default.p68(o)}function Mt(t,i){return xt(t,i)*n.default.p46}function Dt(t,i,n=new e.p16){return r(n,t.x*i.x,t.y*i.y,t.z*i.z)}function St(t,i){return Dt(t,i,t)}function At(t,i){return Dt(t,i,i)}function Ot(t,i,s=new e.p16){const o=x(i,i);if(o<n.default.p51)return r(s,0,0,0);const h=x(t,i)/o;return r(s,i.x*h,i.y*h,i.z*h)}function jt(t,i){return Ot(t,i,t)}function Ct(t,i){return Ot(t,i,i)}function Tt(t,i,s=new e.p16){const o=x(i,i);if(o<n.default.p51)return h(s,t);const u=x(t,i)/o;return r(s,t.x-i.x*u,t.y-i.y*u,t.z-i.z*u)}function qt(t,i){return Tt(t,i,t)}function Pt(t,i){return Tt(t,i,i)}function kt(t){return n.default.p54(t.x*t.x+t.y*t.y+t.z*t.z)}function Rt(t){return t.x*t.x+t.y*t.y+t.z*t.z}function Et(t,i,e){const s=Mt(t,i),o=t.y*i.z-t.z*i.y,r=t.z*i.x-t.x*i.z,h=t.x*i.y-t.y*i.x;return s*n.default.p45(e.x*o+e.y*r+e.z*h)}function Ft(t,i,s,o=new e.p16){const u=i.x-t.x,c=i.y-t.y,a=i.z-t.z,l=u*u+c*c+a*a;if(0==l||s>=0&&l<=s*s)return h(o,i);const f=n.default.p54(l);return r(o,t.x+u/f*s,t.y+c/f*s,t.z+a/f*s)}function It(t,s=new e.p16){if(n.default.p69(t.z)>i.p91){const i=t.y*t.y+t.z*t.z,e=1/n.default.p54(i);return r(s,0,-t.z*e,t.y*e)}const o=t.x*t.x+t.y*t.y,h=1/n.default.p54(o);return r(s,-t.y*h,t.x*h,0)}function Vt(t,i,e){const s=i-t;return s>0?t+n.default.p58(s,e):t-n.default.p58(-s,e)}i.p135=Z,i.p134=function(t,i,n,s=new e.p16){return n<=0?h(s,t):n>=1?h(s,i):Z(t,i,n,s)},i.p133=K,i.p132=Q,i.p131=Y,i.p130=function(t){return Y(t,t)},i.p129=X,i.p128=tt,i.p127=it,i.p126=et,i.p125=nt,i.p124=st,i.p123=ot,i.p122=rt,i.p121=ht,i.p120=ut,i.p119=ct,i.p118=at,i.p117=lt,i.p116=ft,i.p115=pt,i.p114=dt,i.p113=_t,i.p112=mt,i.p111=wt,i.p110=bt,i.p109=vt,i.p108=yt,i.p107=gt,i.p106=xt,i.p105=Mt,i.p104=function(t,i=new e.p16){let o=!1;const u=x(t,s.p83.right),c=x(t,s.p83.up);u<0&&(o=!0);let a=n.default.p69(c),l=n.default.p69(u),f=s.p83.right;a>l&&(l=a,f=s.p83.up,o=c<0);const p=x(t,s.p83.forward);return a=n.default.p69(p),a>l&&(f=s.p83.forward,o=p<0),o?r(i,-f.x,-f.y,-f.z):h(i,f)},i.p103=Dt,i.p102=St,i.p101=At,i.p100=Ot,i.p99=jt,i.p98=Ct,i.p97=Tt,i.p96=qt,i.p95=Pt,i.p94=kt,i.p93=Rt,i.p92=Et,i.p38=Ft,i.p91=.7071067811865476,i.p90=It,i.p89=Vt;const Ht=new e.p16;function Nt(t,i,s=new e.p18){const r=c(i,Ht),h=t*n.default.p47*.5,u=n.default.p55(h),a=n.default.p63(h);return o.default.p25(s,r.x*u,r.y*u,r.z*u,a)}function Bt(t,i,s,o,r=new e.p16){const h=kt(t),u=kt(i);if(h>1e-6&&u>1e-6){const e=_t(t,h),c=_t(i,u),l=x(e,c);if(l>.999999)return Ft(t,i,o,r);if(l<-.999999){const t=It(e),i=Nt(s*n.default.p46,t),c=Vt(h,u,o);return V(i,e,r),ct(r,c)}const f=n.default.p68(l),d=p(e,c);a(d);const _=Nt(n.default.p58(s,f)*n.default.p46,d),m=Vt(h,u,o);return V(_,e,r),ct(r,m)}return Ft(t,i,o,r)}function zt(t,i,s,o,h,c,a=new e.p16){let l=0,f=0,p=0;const d=2/(o=n.default.p59(1e-4,o)),_=d*c,m=1/(1+_+.48*_*_+.235*_*_*_);let w=t.x-i.x,b=t.y-i.y,v=t.z-i.z;const y=u(i),g=h*o,x=w*w+b*b+v*v;if(x>g*g){const t=n.default.p54(x);w=w/t*g,b=b/t*g,v=v/t*g}i.x=t.x-w,i.y=t.y-b,i.z=t.z-v;const M=(s.x+d*w)*c,D=(s.y+d*b)*c,S=(s.z+d*v)*c;s.x=(s.x-d*M)*m,s.y=(s.y-d*D)*m,s.z=(s.z-d*S)*m,l=i.x+(w+M)*m,f=i.y+(b+D)*m,p=i.z+(v+S)*m;const A=y.x-t.x,O=y.y-t.y,j=y.z-t.z;return A*(l-y.x)+O*(f-y.y)+j*(p-y.z)>0&&(l=y.x,f=y.y,p=y.z,s.x=(l-y.x)/c,s.y=(f-y.y)/c,s.z=(p-y.z)/c),r(a,l,f,p)}i.p88=Nt,i.p87=Bt,i.p33=zt,i.p86={p25:r,p24:h,p23:u,p173:c,p169:p,p166:m,p162:v,p171:l,p163:b,p160:g,p159:x,p58:M,p59:S,p69:O,p43:C,p41:R,p40:q,p138:W,p141:z,p133:K,p132:Q,p131:Y,p129:X,p126:et,p123:ot,p120:ut,p118:at,p145:V,p116:ft,p113:_t,p111:wt,p109:vt,p107:gt,p88:Nt,p105:Mt,p92:Et,p93:Rt,p94:kt,p100:Ot,p97:Tt,p103:Dt,p38:Ft,p87:Bt,p33:zt},i.p85={p172:a,p168:d,p167:_,p165:w,p158:D,p157:A,p155:j,p154:T,p149:E,p148:F,p151:P,p150:k,p137:L,p136:J,p140:G,p139:U,p128:tt,p127:it,p125:nt,p124:st,p122:rt,p121:ht,p119:ct,p117:lt,p144:H,p115:pt,p114:dt,p112:mt,p110:bt,p108:yt,p99:jt,p98:Ct,p96:qt,p95:Pt,p102:St,p101:At,p161:y,p170:f},i.p84=Object.assign(Object.assign(Object.assign({},s.p83),i.p86),i.p85),i.default=i.p84})),define("d10",["require","exports","d3","d6","d7","d9","d8"],(function(t,i,e,n,s,o,r){Object.defineProperty(i,"__esModule",{value:!0}),i.p174=i.p175=i.p176=i.p177=i.p178=i.p179=i.p180=i.p181=i.p182=i.p183=i.p184=i.p185=i.p186=i.p187=i.p88=i.p105=i.p159=i.p188=i.p189=i.p190=i.p191=i.p192=i.p193=i.p194=i.p195=i.p196=i.p197=i.p198=i.p199=i.p200=i.p201=i.p87=i.p202=i.p136=i.p137=i.p138=i.p148=i.p149=i.p203=i.p41=i.p141=i.p40=i.p204=i.p205=i.p172=i.p173=i.p119=i.p120=i.p121=i.p122=i.p123=i.p206=i.p207=i.p208=i.p209=i.p210=i.p132=i.p133=void 0,s=__importStar(s),o=__importStar(o),r=__importDefault(r);const h=.5*s.default.p47;function u(t,i){return t.x===i.x&&t.y===i.y&&t.z===i.z&&t.w===i.w}function c(t,i){return t.x!==i.x||t.y!==i.y||t.z!==i.z||t.w!==i.w}i.p133=u,i.p132=c;const a=new e.p16,l=new e.p16,f=new e.p16;function p(t,i=r.default.up,n=new e.p18){const h=o.default.p173(t,a),u=o.default.p172(o.default.p169(i,h,l)),c=o.default.p169(h,u,f),p=u.x,d=u.y,_=u.z,m=c.x,w=c.y,b=c.z,v=h.x,y=h.y,g=h.z,x=p+w+g;if(x>0){let t=s.default.p54(x+1);return n.w=.5*t,t=.5/t,n.x=(b-y)*t,n.y=(v-_)*t,n.z=(d-m)*t,n}if(p>=w&&p>=g){const t=s.default.p54(1+p-w-g),i=.5/t;return n.x=.5*t,n.y=(d+m)*i,n.z=(_+v)*i,n.w=(b-y)*i,n}if(w>g){const t=s.default.p54(1+w-p-g),i=.5/t;return n.x=(m+d)*i,n.y=.5*t,n.z=(y+b)*i,n.w=(v-_)*i,n}const M=s.default.p54(1+g-p-w),D=.5/M;return n.x=(v+_)*D,n.y=(y+b)*D,n.z=.5*M,n.w=(d-m)*D,n}i.p210=p,i.p209=o.default.p145,i.p208=o.default.p144;const d={x:"y",y:"z",z:"x"},_=new e.p16;function m(t,i=new e.p18){const o=t.x.x+t.y.y+t.z.z;if(o>0){let e=s.default.p54(o+1);return i.w=.5*e,e=.5/e,i.x=(t.z.y-t.y.z)*e,i.y=(t.x.z-t.z.x)*e,i.z=(t.y.x-t.x.y)*e,q(i)}let r="x";t.y.y>t.x.x&&(r="y"),t.z.z>t[r][r]&&(r="z");const h=d[r],u=d[h],c=t[r][r]-t[h][h]-t[u][u]+1,a=.5/s.default.p54(c);_[r]=a*c;const l=(t[u][h]-t[h][u])*a;return _[h]=(t[h][r]+t[r][h])*a,_[u]=(t[u][r]+t[r][u])*a,(0,n.p25)(i,_.x,_.y,_.z,l),q(i)}i.p207=m;const w=new e.p16,b=new e.p16,v=new e.p16,y=new e.p16,g={x:0,y:0,z:0},x={x:0,y:0,z:0},M={x:0,y:0,z:0},D={x:g,y:x,z:M};function S(t,i,r=new e.p18){const h=o.default.p173(t,w),u=o.default.p173(i,b),c=o.default.p159(h,u);if(c>.999999)return(0,n.p25)(r,0,0,0,1);if(c<-.999999){let t=o.p84.set(v,0,h.z,h.y),i=t.y*t.y+t.z*t.z;i<1e-6&&(t.x=-h.z,t.y=0,t.z=h.x,i=t.x*t.x+t.z*t.z);const e=1/s.default.p54(i);t.x*=e,t.y*=e,t.z*=e;const n=o.p84.set(y,0,0,0);n.x=t.y*h.z-t.z*h.y,n.y=t.z*h.x-t.x*h.z,n.z=t.x*h.y-t.y*h.x;const u=-h.x*h.x,c=-h.y*h.y,a=-h.z*h.z,l=-h.x*h.y,f=-h.x*h.z,p=-h.y*h.z,d=n.x*n.x,_=n.y*n.y,w=n.z*n.z,b=n.x*n.y,S=n.x*n.z,A=n.y*n.z,O=-t.x*t.x,j=-t.y*t.y,C=-t.z*t.z,T=-t.x*t.y,q=-t.x*t.z,P=-t.y*t.z;return g.x=u+d+O,g.y=l+b+T,g.z=f+S+q,x.x=l+b+T,x.y=c+_+j,x.z=p+A+P,M.x=f+S+q,M.y=p+A+P,M.z=a+w+C,m(D,r)}const a=o.default.p168(h,u),l=(1-c)/o.default.p159(a,a),f=l*a.x,p=l*a.z,d=f*a.y,_=f*a.z,S=p*a.y;return g.x=c+f*a.x,g.y=d-a.z,g.z=_+a.y,x.x=d+a.z,x.y=c+l*a.y*a.y,x.z=S-a.x,M.x=_-a.y,M.y=S+a.x,M.z=c+p*a.z,m(D,r)}function A(t,i,s=new e.p18){const o=t.x,r=t.y,h=t.z,u=t.w,c=i.x,a=i.y,l=i.z,f=i.w,p=r*l-h*a,d=h*c-o*l,_=o*a-r*c,m=o*c+r*a+h*l;return(0,n.p25)(s,o*f+c*u+p,r*f+a*u+d,h*f+l*u+_,u*f-m)}function O(t,i){return A(t,i,t)}function j(t,i){return A(t,i,i)}function C(t,i,s=new e.p18){return(0,n.p25)(s,t.x*i,t.y*i,t.z*i,t.w*i)}function T(t,i=new e.p18){const o=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w;if(0!==o){const e=1/s.default.p54(o);return(0,n.p25)(i,t.x*e,t.y*e,t.z*e,t.w*e)}return(0,n.p24)(i,t)}function q(t){return T(t,t)}function P(t,i=new e.p18){const s=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w;if(0!==s){const e=1/s;return(0,n.p25)(i,-t.x*e,-t.y*e,-t.z*e,t.w*e)}return(0,n.p24)(i,t)}function k(t){return P(t,t)}function R(t,i,n,s=new e.p18){const o=n,r=1-o,h=t.x,u=t.y,c=t.z,a=t.w,l=i.x,f=i.y,p=i.z,d=i.w;return h*l+u*f+c*p+a*d>=0?(s.x=r*h+o*l,s.y=r*u+o*f,s.z=r*c+o*p,s.w=r*a+o*d):(s.x=r*h-o*l,s.y=r*u-o*f,s.z=r*c-o*p,s.w=r*a-o*d),q(s)}function E(t,i,o,r=new e.p18){const h=t.x,u=t.y,c=t.z,a=t.w;let l=i.x,f=i.y,p=i.z,d=i.w,_=a*d+h*l+u*f+c*p;if(_<0&&(d=-d,l=-l,f=-f,p=-p,_=-_),s.default.p69(_)>=1)return(0,n.p25)(r,h,u,c,a);const m=s.default.p68(_),w=s.default.p54(1-_*_);if(s.default.p69(w)<.001)return(0,n.p25)(r,.5*h+.5*l,.5*u+.5*f,.5*c+.5*p,.5*a+.5*d);const b=s.default.p55((1-o)*m)/w,v=s.default.p55(o*m)/w;return(0,n.p25)(r,h*b+l*v,u*b+f*v,c*b+p*v,a*b+d*v)}function F(t,i,s,o=new e.p18){return s<=0?(0,n.p24)(o,t):s>=1?(0,n.p24)(o,i):R(t,i,s,o)}function I(t,i,e){return F(t,i,e,t)}function V(t,i,e){return F(t,i,e,i)}function H(t,i,s,o=new e.p18){return s<=0?(0,n.p24)(o,t):s>=1?(0,n.p24)(o,i):E(t,i,s,o)}function N(t,i,e){return H(t,i,e,t)}function B(t,i,e){return H(t,i,e,i)}function z(t,i,o=new e.p18){i*=.5;const r=s.default.p55(i);return(0,n.p25)(o,t.x*r,t.y*r,t.z*r,s.default.p63(i))}function G(t,i,o,r=new e.p18){const h=nt(t,i);return 0==h?(0,n.p24)(r,i):E(t,i,s.default.p58(1,o/h),r)}function U(t,e){const n=(0,i.p209)(P(t),e);return s.default.p65(n.x,n.z)*s.default.p46}function W(t,e){const n=o.default.p173(e),r=(0,i.p209)(P(t),n);return-s.default.p67(r.y)*s.default.p46}function L(t,e,n){const o=(0,i.p209)(t,r.default.up),h=P(t),u=(0,i.p209)(h,e),c=(0,i.p209)(h,n),a=k(p(o,u)),l=(0,i.p209)(a,c);return s.default.p65(l.x,l.z)*s.default.p46}function J(t,e){const n=(0,i.p208)(P(t),(0,i.p209)(e,r.default.forward));return s.default.p65(n.x,n.z)*s.default.p46}function $(t,e){const n=(0,i.p208)(P(t),(0,i.p209)(e,r.default.forward));return-s.default.p67(n.y)*s.default.p46}function Z(t,e){const n=(0,i.p209)(t,r.default.up),o=P(t),h=(0,i.p209)(o,(0,i.p209)(e,r.default.forward)),u=(0,i.p209)(o,(0,i.p209)(e,r.default.up)),c=k(p(n,h)),a=(0,i.p209)(c,u);return s.default.p65(a.x,a.z)*s.default.p46}function K(t,i=new e.p16){let n=s.default.p69(t.w)>1?T(t):t;const r=2*s.default.p68(n.w),h=s.default.p54(1-n.w*n.w);return[r,h>1e-4?o.default.p25(i,n.x/h,n.y/h,n.z/h):o.default.p25(i,1,0,0)]}function Q(t,i=new e.p16){const[n,o]=K(t,i);return[n*s.default.p46,o]}i.p206=S,i.p123=A,i.p122=O,i.p121=j,i.p120=C,i.p119=function(t,i){return C(t,i,t)},i.p173=T,i.p172=q,i.p205=P,i.p204=k,i.p40=R,i.p141=E,i.p41=F,i.p203=F,i.p149=I,i.p148=V,i.p138=H,i.p137=N,i.p136=B,i.p202=z,i.p87=G,i.p201=U,i.p200=W,i.p199=L,i.p198=J,i.p197=$,i.p196=Z,i.p195=function(t,i,s=new e.p18){return i<=0?(0,n.p24)(s,e.p18.IDENTITY):i>=1?(0,n.p24)(s,t):F(e.p18.IDENTITY,t,i,s)},i.p194=function(t,i,s=new e.p18){return i<=0?(0,n.p24)(s,e.p18.IDENTITY):i>=1?(0,n.p24)(s,t):H(e.p18.IDENTITY,t,i,s)},i.p193=K,i.p192=Q,i.p191=function(t,i,n,s=new e.p18){const h=S(t,i,s);let[u=0,c=r.default.zero]=Q(h);return o.default.p159(c,n)<0&&(u=-u),o.default.p88(u,n,s)};const Y=new e.p18;function X(t,i,n=new e.p18){const s=P(t,Y);return O(s,i),P(s,n)}function tt(t,i,s=new e.p18){return u(i,t)?(0,n.p24)(s,e.p18.IDENTITY):A(i,P(t,Y),s)}function it(t){return t>1-s.p50}function et(t,i){return t.x*i.x+t.y*i.y+t.z*i.z+t.w*i.w}function nt(t,i){const e=s.default.p58(s.default.p69(et(t,i)),1);return it(e)?0:2*s.default.p68(e)*s.default.p46}i.p190=X,i.p189=tt,i.p188=it,i.p159=et,i.p105=nt;const st=new e.p16;function ot(t,i,r=new e.p18){const u=o.default.p173(i,st);t*=h;const c=s.default.p55(t),a=s.default.p63(t),l=u.x*c,f=u.y*c,p=u.z*c;return(0,n.p25)(r,l,f,p,a)}function rt(t,i,o,r=new e.p18){if(i>=1)return(0,n.p24)(r,e.p18.IDENTITY);if(i<=0)return(0,n.p24)(r,t);const h=1-nt(e.p18.IDENTITY,t)/180,u=s.default.p43(1-(i-h)/(1-h),0,1);let c=s.default.p43(h/i,0,1);for(let t=0;t<o;t++){const t=c*s.default.p75*.5;c=s.default.p55(t)}return H(e.p18.IDENTITY,t,c*u,r)}function ht(t,i,e){if(i>=1)return 0;if(i<=0)return t;const n=1-s.default.p69(t)/180,o=s.default.p43(1-(i-n)/(1-n),0,1);let r=s.default.p43(n/i,0,1);for(let t=0;t<e;t++){const t=r*s.default.p75*.5;r=s.default.p55(t)}return s.default.p41(0,t,r*o)}function ut(t,i,n,s,o,r=new e.p18){const h=p(s,o),u=p(i,n);return O(u,t),k(h),A(u,h,r)}function ct(t){return(t%=360)>=180?t-360:t<=-180?t+360:t}function at(t,i=new e.p16){return o.default.p25(i,ct(t.x),ct(t.y),ct(t.z))}function lt(t,n,s=new e.p18){if(n){const e=P(n);O(e,t);const o=(0,i.p209)(e,r.default.forward),h=(0,i.p209)(e,r.default.up);return o.x*=-1,h.x*=-1,p(o,h,e),A(e,n,s)}const o=(0,i.p209)(t,r.default.forward),h=(0,i.p209)(t,r.default.up);return o.x*=-1,h.x*=-1,p(o,h,s)}function ft(t,i,o,r=new e.p18){t*=h,i*=h,o*=h;const u=s.default.p55(t),c=s.default.p63(t),a=s.default.p55(i),l=s.default.p63(i),f=s.default.p55(o),p=s.default.p63(o);return(0,n.p25)(r,l*u*p+a*c*f,a*c*p-l*u*f,l*c*f-a*u*p,l*c*p+a*u*f)}function pt(t,i){return ft(t.x,t.y,t.z,i)}function dt(t,i=new e.p16){const n=t.x,o=t.y,r=t.z,h=t.w,u=2*(h*o-n*r);return u<=-.99999?(i.x=2*s.default.p65(n,h),i.y=-s.default.p75/2,i.z=0):u>=.99999?(i.x=2*s.default.p65(n,h),i.y=s.default.p75/2,i.z=0):(i.x=s.default.p65(2*(h*n+o*r),1-2*(n*n+o*o)),i.y=s.default.p67(u),i.z=s.default.p65(2*(h*r+n*o),1-2*(o*o+r*r))),i}function _t(t,i=new e.p16){return dt(t,i),i.x*=s.default.p46,i.y*=s.default.p46,i.z*=s.default.p46,i}function mt(t,i,e){return t<-360&&(t+=360),t>360&&(t-=360),s.default.p43(t,i,e)}i.p88=ot,i.p187=rt,i.p186=ht,i.p185=ut,i.p184=ct,i.p183=at,i.p182=lt,i.p181=ft,i.p180=pt,i.p179=dt,i.p178=_t,i.p177=mt,i.p176={p25:n.p25,p24:n.p24,p23:n.p23,p133:u,p132:c,p210:p,p205:P,p123:A,p209:i.p209,p189:tt,p206:S,p40:R,p141:E,p41:F,p138:H,p203:i.p203,p198:J,p197:$,p196:Z,p201:U,p200:W,p199:L,p187:rt,p186:ht,p185:ut,p184:ct,p183:at,p182:lt,p180:pt,p181:ft,p177:mt,p105:nt,p88:ot,p202:z,p87:G,p190:X,p159:et,p173:T,p178:_t},i.p175={p172:q,p122:O,p121:j,p204:k,p208:i.p208,p149:I,p148:V,p137:N,p136:B},i.p174=Object.assign(Object.assign({},i.p176),i.p175),i.default=i.p174})),define("d11",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d12",["require","exports","d3","d10","d9"],(function(t,i,e,n,s){function o(t){return t.getRotation()}function r(t){return t.getPosition()}function h(t){return t.getScale()}function u(t){return t.getEulerAngles()}function c(t){return t.getLocalPosition()}function a(t){return t.getLocalRotation()}function l(t){return t.getLocalScale()}function f(t){return t.getLocalEulerAngles()}function p(t,i,e,n){t.setPosition(i,e,n)}function d(t,i,e,n,s){t.setRotation(i,e,n,s)}function _(t,i,e,n){t.setLocalPosition(i,e,n)}function m(t,i,e,n,s){t.setLocalRotation(i,e,n,s)}function w(t){return t.up}function b(t){const i=t.forward;return i.z*=-1,i}Object.defineProperty(i,"__esModule",{value:!0}),i.p211=i.p212=i.p213=i.p214=i.p215=i.p216=i.p217=i.p218=i.p219=i.p220=i.p221=i.p222=i.p223=i.p224=i.p225=i.p226=i.p227=i.p228=i.p229=void 0,n=__importDefault(n),s=__importDefault(s),i.p229=o,i.p228=r,i.p227=h,i.p226=u,i.p225=c,i.p224=a,i.p223=l,i.p222=f,i.p221=p,i.p220=d,i.p219=_,i.p218=m,i.p217=w,i.p216=b;const v=new e.p18;function y(t,i,h=new e.p16){const u=r(t),c=o(t),a=l(t);return s.default.p127(u,s.default.p102(n.default.p209(c,i,h),a))}function g(t,i,h=new e.p16){const u=r(t),c=o(t),a=l(t);return s.default.p115(n.default.p208(n.default.p205(c,v),s.default.p126(i,u,h)),a)}function x(t,i,s=new e.p16){const r=o(t);return n.default.p209(n.default.p205(r,v),i,s)}function M(t,i,s=new e.p16){const r=o(t);return n.default.p209(r,i,s)}i.p215=y,i.p214=g,i.p213=x,i.p212=M,i.p211={p217:w,p216:b,p228:r,p229:o,p227:h,p226:u,p225:c,p224:a,p223:l,p222:f,p221:p,p220:d,p219:_,p218:m,p215:y,p212:M,p214:g,p213:x},i.default=i.p211})),define("d13",["require","exports","d9","d3","d12","d10"],(function(t,i,e,n,s,o){Object.defineProperty(i,"__esModule",{value:!0}),i.p230=i.p231=void 0,e=__importDefault(e),s=__importDefault(s),o=__importDefault(o),i.p231=class{static log(...t){console.info(...t)}static logError(...t){console.error(...t)}static logWarning(...t){console.warn(...t)}static drawLine(t,i,e=pc.Color.RED){pc.app.drawLine(t,i,e,!1)}static drawRay(t,i,n=pc.Color.RED){pc.app.drawLine(t,e.default.p129(t,i),n,!1)}static drawDirectionVector(t,i,n=pc.Color.RED){const s=i,o=e.default.p129(s,t);pc.app.drawLine(s,o,n,!1)}static drawDebugInfo(t){const i=s.default.p229(t),n=s.default.p228(t),r=n;let h=n;const u=o.default.p209(i,pc.Vec3.BACK);h=e.default.p129(r,u),pc.app.drawLine(r,h,pc.Color.BLUE,!1);const c=o.default.p209(i,pc.Vec3.RIGHT);h=e.default.p129(r,c),pc.app.drawLine(r,h,pc.Color.RED,!1);const a=o.default.p209(i,pc.Vec3.UP);h=e.default.p129(r,a),pc.app.drawLine(r,h,pc.Color.GREEN,!1)}static drawRotation(t,i=pc.Color.RED){const n=s.default.p229(t),o=s.default.p228(t),r=new pc.Vec3;n.transformVector(pc.Vec3.BACK,r);const h=o,u=e.default.p129(h,r);pc.app.drawLine(h,u,i,!1)}static drawRotationQPC(t,i,e=pc.Color.RED){var s=new pc.Vec3;t.transformVector(pc.Vec3.BACK,s);var o=i,r=(new n.p16).add2(o,s);pc.app.drawLine(o,r,e,!1)}static drawCircleHorizontal(t,i=1,e=20,n=pc.Color.RED){const s=[],o=[],r=2*Math.PI/e;let h=0;for(let u=0;u<e;u++){const e=Math.sin(h),u=Math.cos(h);h+=r;const c=Math.sin(h),a=Math.cos(h);s.push(new pc.Vec3(t.x+i*e,t.y,t.z+i*u),new pc.Vec3(t.x+i*c,t.y,t.z+i*a)),o.push(n,n)}pc.app.drawLines(s,o,!1)}static drawPoint({center:t,radius:i=.1,numSegments:e=20,color:n=pc.Color.RED,layer:s}){const o=[],r=[],h=2*Math.PI/e;let u=0;for(let s=0;s<e;s++){const e=Math.sin(u),s=Math.cos(u);u+=h;const c=Math.sin(u),a=Math.cos(u);o.push(new pc.Vec3(t.x+i*e,t.y,t.z+i*s),new pc.Vec3(t.x+i*c,t.y,t.z+i*a)),o.push(new pc.Vec3(t.x,t.y+i*e,t.z+i*s),new pc.Vec3(t.x,t.y+i*c,t.z+i*a)),o.push(new pc.Vec3(t.x+i*s,t.y+i*e,t.z),new pc.Vec3(t.x+i*a,t.y+i*c,t.z)),r.push(n,n,n,n,n,n)}pc.app.drawLines(o,r,!1,s)}};class r{static log(...t){console.warn(...t)}}i.p230=r,r.logged=!1})),define("d14",["require","exports"],(function(t,i){let e;Object.defineProperty(i,"__esModule",{value:!0}),i.p232=void 0;const n={}.toString;function s(t){return t&&(e=n.call(t))&&("[object Function]"===e||"[object AsyncFunction]"===e)}i.p232=s,i.default=s})),define("d15",["require","exports"],(function(t,i){function e(t){return Array.isArray(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.p233=void 0,i.p233=e,i.default=e})),define("d16",["require","exports","d14"],(function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.p234=i.p235=void 0,e=__importDefault(e),i.p235=new Proxy({},{get:(t,i)=>i}),i.p234=function(t){return(0,e.default)(t)?t(i.p235):t}})),define("d17",["require","exports","d14","d15","d16"],(function(t,i,e,n,s){Object.defineProperty(i,"__esModule",{value:!0}),__exportStar(e,i),__exportStar(n,i),__exportStar(s,i)})),define("d18",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d19",["require","exports","d17"],(function(t,i,e){function n(t){(t.startsWith(i.p239)||t.startsWith(i.p238))&&(t=t.substring(1));const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}Object.defineProperty(i,"__esModule",{value:!0}),i.p236=i.p237=i.p238=i.p239=void 0,i.p239="$",i.p238="_",i.p237=n,i.p236=function(t,i,s){const o="function"==typeof i?(0,e.p234)(i):i;if("string"!=typeof o)throw new Error("Attribute name must be string");t.attributes.add(o,Object.assign({title:n(o)},s))}})),define("d20",["require","exports","d3","d10","d9"],(function(t,i,e,n,s){Object.defineProperty(i,"__esModule",{value:!0}),i.p240=void 0,n=__importDefault(n),s=__importDefault(s);class o{static _(){const t=new o;return t.m=new e.p16,t.v=new e.p18,t.g=new e.p16,t.M=new e.p16,t}D(){const t=o._();s.default.p24(t.m,this.m),n.default.p24(t.v,this.v),s.default.p24(t.g,this.g),s.default.p24(t.M,this.M)}}i.p240=o,i.default=o})),define("d21",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d22",["require","exports","d19","d4","d10","d9","d7","d3","D23","d20"],(function(t,i,e,n,s,o,r,h,u,c){Object.defineProperty(i,"__esModule",{value:!0}),i.p241=void 0,n=__importDefault(n),s=__importDefault(s),o=__importDefault(o),r=__importDefault(r),u=__importStar(u),c=__importDefault(c);class a extends n.default{constructor(){super(...arguments),this.moveWithPhysics=!0,this.S=new h.p16,this.A=new h.p18,this.O=new h.p16,this.j=new h.p18,this.g=new h.p16,this.M=new h.p16,this.C=new h.p16,this.T=new h.p18,this.q=new h.p16,this.P=new h.p18,this.k=new h.p16,this.R=new h.p18}F(t=new h.p16){return o.default.p126(this.k,this.q,t)}I(t=new h.p18){return s.default.p122(s.default.p205(this.P,t),this.R)}V(){}onEnable(){u.default.H(this.app),u.default.N(this)}onDisable(){u.default.B(this)}awake(){this.V();const t=this.entity.getPosition(),i=this.entity.getRotation();o.default.p24(this.k,t),s.default.p24(this.R,i),o.default.p24(this.q,t),s.default.p24(this.P,i),o.default.p24(this.S,t),s.default.p24(this.A,i);const e=new c.default;e.m=this.k,e.v=this.R,e.g=this.g,e.M=this.M,this.G=e}U(t){this.entity.rigidbody.teleport(t),o.default.p24(this.q,t),o.default.p24(this.k,t)}W(t){this.entity.setRotation(t),this.entity.rigidbody.L(),s.default.p24(this.P,t),s.default.p24(this.R,t)}J(t,i){this.entity.rigidbody.teleport(t,i),o.default.p24(this.q,t),s.default.p24(this.P,i),o.default.p24(this.k,t),s.default.p24(this.R,i)}Z(){return this.G}K(t){this.J(t.m,t.v),o.default.p24(this.g,t.g),o.default.p24(this.M,t.M)}Y(t){o.default.p24(this.q,this.k),s.default.p24(this.P,this.R),this.X&&this.X.tt(this.k,this.R,t),t>0&&(o.default.p112(o.default.p126(this.k,this.q,this.g),t),s.default.p121(this.R,s.default.p205(this.P,l)),s.default.p178(l,this.M),o.default.p117(r.default.p47/t,this.M))}}i.p241=a;const l=new h.p18;i.default=a,pc.registerScript(a,u.p299),(0,e.p236)(a,"moveWithPhysics",{description:"Determines if the platform moves with rigidbody.MovePosition (when true), or with rigidbody.position (when false)",type:"boolean",default:!0})})),define("d24",["require","exports","d3","d9","d10","d8"],(function(t,i,e,n,s,o){Object.defineProperty(i,"__esModule",{value:!0}),i.p242=i.p243=i.p244=i.p245=i.p246=i.p247=i.p248=i.p249=i.p250=i.p251=i.p252=i.p253=i.p254=i.p255=i.p256=i.p257=i.p258=i.p259=void 0,n=__importDefault(n),s=__importDefault(s),o=__importStar(o);const r=function(t){if(window.Ammo)return{it:new Ammo.btPhysicsResolver,et:new Ammo.btVector3,nt:new Ammo.btQuaternion(0,0,0,1),st:new Ammo.btQuaternion(0,0,0,1),ot:new Ammo.btVector3,rt:new Ammo.btVector3,ht:new Ammo.btTransform,ut:new Ammo.btTransform,ct:.5,lt:new Ammo.btSphereShape(.5),ft:new Ammo.btPairCachingGhostObject,dt:void 0,_t:new Ammo.btPairCachingGhostObject,wt:void 0,bt:new Ammo.ConcreteContactResultCallback,vt:new e.p16,yt:new e.p16,gt:new e.p16,xt:new e.p18,Mt:new e.p18,Dt:new e.p14,St:new e.p18,At:new e.p18}}();function h(t,i){const e=new Ammo.btSphereShape(t);return i&&e.setMargin(i),e}function u(t,i,e){const n=new Ammo.btCapsuleShape(t,i);return e&&n.setMargin(e),n}function c(t,i){t.teleport(i,t.entity.getRotation())}function a(t,i){t.teleport(t.entity.getPosition(),i)}i.p259=h,i.p258=function(t,i){const e=r.et;e.setValue(t.x,t.y,t.z);const n=new Ammo.btBoxShape(e);return i&&n.setMargin(i),n},i.p257=u,i.p256=function(t){return new Ammo.btConvexHullShape(t,t.length,3)},i.p255=c,i.p254=a;class l extends e.p5{constructor(t,i,e,n,s){super(t,i,e,n),this.distance=s}clone(){return new l(this.entity,n.default.p23(this.point),n.default.p23(this.normal),this.hitFraction,this.distance)}}function f(t,i=new e.p16){const s=n.default.p169(o.default.up,t,i);return n.default.p133(s,o.default.zero)&&n.default.p24(s,o.p83.forward),s}function p(t,i){t?r.ot.setValue(t.x,t.y,t.z):r.ot.setValue(0,0,0),i?r.nt.setValue(i.x,i.y,i.z,i.w):r.nt.setValue(0,0,0,1),r.ht.setOrigin(r.ot),r.ht.setRotation(r.nt)}function d(t,i){t?r.ot.setValue(t.x,t.y,t.z):r.ot.setValue(0,0,0),i?r.rt.setValue(i.x,i.y,i.z):r.rt.setValue(0,0,0)}function _(t,i,e,n){d(t,i),function(t,i){t?r.nt.setValue(t.x,t.y,t.z,t.w):r.nt.setValue(0,0,0,1),i?r.st.setValue(i.x,i.y,i.z,i.w):r.st.setValue(0,0,0,1)}(e,n),r.ht.setOrigin(r.ot),r.ht.setRotation(r.nt),r.ut.setOrigin(r.rt),r.ut.setRotation(r.st)}function m(t,i,s,o,h,u,c,a){d(i,s);const f=n.default.p163(i,s),p=new Ammo.AllHitsRayResultCallback(r.ot,r.rt),_=t.dynamicsWorld;"number"==typeof h&&p.set_m_collisionFilterMask(h),"number"==typeof u&&p.set_m_collisionFilterGroup(u),_.rayTest(r.ot,r.rt,p);const m=function(t,i,s,o,r){let h=0;if(t.hasHit()){const u=t.get_m_collisionObjects(),c=t.get_m_hitPointWorld(),a=t.get_m_hitNormalWorld(),f=t.get_m_hitFractions(),p=Math.min(u.size(),i.length);for(let t=0;t<p;t++){const p=u.at(t),d=Ammo.castObject(p,Ammo.btRigidBody);if(d&&d.entity){if(o&&!d.entity.tags.has(...o)||r&&!r(d.entity))continue;const u=c.at(t),p=a.at(t),_=f.at(t),m=s*_,w=i[h]=new l(d.entity,new e.p16,new e.p16,_,m);w.entity=d.entity,w.hitFraction=_,w.distance=m,n.default.p25(w.point,u.x(),u.y(),u.z()),n.default.p25(w.normal,p.x(),p.y(),p.z()),h++}}}return h}(p,o,f,c,a);return Ammo.destroy(p),m}function w(t,i,e,s,o,h,u,c,a){const l=i;return m(t,l,n.default.p127(l,n.default.p119(n.default.p173(e,r.vt),o)),s,h,u,c,a)}function b(t,i,s,o,h,u,c,a,f,p,d,m){1===r.it&&r.it.overlap(),_(i,s,o,h);const w=n.default.p163(i,s),b=new Ammo.AllHitsConvexResultCallback(r.ot,r.rt),v=t.dynamicsWorld;"number"==typeof a&&b.set_m_collisionFilterMask(a),"number"==typeof f&&b.set_m_collisionFilterGroup(f),v.convexSweepTest(u,r.ht,r.ut,b,m||0);const y=function(t,i,s,o,r){let h=0;if(t.hasHit()){const u=t.get_m_hitCollisionObjects(),c=t.get_m_hitPointWorld(),a=t.get_m_hitNormalWorld(),f=t.get_m_hitFractions(),p=Math.min(u.size(),i.length);for(let t=0;t<p;t++){const p=u.at(t),d=Ammo.castObject(p,Ammo.btRigidBody);if(d&&d.entity){if(o&&!d.entity.tags.has(...o)||r&&!r(d.entity))continue;const u=c.at(t),p=a.at(t),_=f.at(t),m=s*_,w=i[h]=new l(d.entity,new e.p16,new e.p16,_,m);w.entity=d.entity,w.hitFraction=_,w.distance=m,n.default.p25(w.point,u.x(),u.y(),u.z()),n.default.p25(w.normal,p.x(),p.y(),p.z()),h++}}}return h}(b,c,w,p,d);return Ammo.destroy(b),y}function v(t,i,e,o,h,c,a,l,p,d,_,m,w){const v=n.default.p126(e,i,r.vt),y=f(v,r.yt),g=s.default.p210(y,v,r.xt),x=n.default.p41(i,e,.5,r.vt),M=n.default.p127(x,n.default.p119(n.default.p173(h,r.yt),a)),D=n.default.p163(i,e),S=w||u(o,D),A=b(t,x,M,g,g,S,c,l,p,d,_,m);return w||Ammo.destroy(S),A}function y(t,i,n,s,o,r,u,c,a,l,f){const p=f||h(s),d=b(t,i,n,e.p18.IDENTITY,e.p18.IDENTITY,p,o,r,u,c,a,l);return f||Ammo.destroy(p),d}function g(t,i,e,s,o,h,u,c,a,l,f,p){const d=i;return y(t,d,n.default.p127(d,n.default.p119(n.default.p173(s,r.vt),h)),e,o,u,c,a,l,f,p)}function x(t,i,e,n,s){if(t._hasOffset){const o=t.data.linearOffset;return s.copy(e).transformVector(o,n),n.add(i)}return i}function M(t,i,e){return t._hasOffset?e.copy(i).mul(t.data.angularOffset):i}function D(t,i,e,s,h,u,c,a,l){1===r.it&&r.it.overlap();const f=i.entity.collision,p=h.entity.collision,d=f.type;if("capsule"!==d&&"sphere"!==d&&"box"!==d)return n.default.p24(a,o.default.zero),l.value=null,!1;const m=t.dynamicsWorld,w=i.body,b=h.body,v=x(f,e,s,r.vt,r.xt),y=M(f,s,r.xt);_(v,x(p,u,c,r.yt,r.Mt),y,M(p,c,r.Mt)),r.ft.setCollisionShape(w.getCollisionShape()),r.ft.setWorldTransform(r.ht),r.dt!==m&&(r.dt=m,r.ft.setCollisionFlags(pc.BODYFLAG_NORESPONSE_OBJECT),m.addCollisionObject(r.ft,pc.BODYGROUP_NONE,pc.BODYMASK_NONE)),r._t.setCollisionShape(b.getCollisionShape()),r._t.setWorldTransform(r.ut),r.wt!==m&&(r.wt=m,r._t.setCollisionFlags(pc.BODYFLAG_NORESPONSE_OBJECT),m.addCollisionObject(r._t,pc.BODYGROUP_NONE,pc.BODYMASK_NONE));const g=new Ammo.ConcreteContactResultCallback;let D=0;const S=r.gt;return g.addSingleResult=(t,i)=>{const e=Ammo.wrapPointer(t,Ammo.btManifoldPoint),s=Ammo.wrapPointer(i,Ammo.btCollisionObjectWrapper).getCollisionObject(),o=Ammo.compare(s,r.ft)?1:-1,h=e.getDistance();if(h<0&&h<D){D=h;const t=e.get_m_normalWorldOnB();n.default.p25(S,o*t.x(),o*t.y(),o*t.z())}return 1},m.contactPairTest(r.ft,r._t,g),r.ft.setCollisionShape(r.lt),r._t.setCollisionShape(r.lt),Ammo.destroy(g),0!==D?(n.default.p24(a,S),l.value=Math.abs(D),!0):(n.default.p24(a,o.default.zero),l.value=null,!1)}i.p253=l,i.p252=f,i.p251=m,i.p250=w,i.p249=b,i.p248=v,i.p247=y,i.p246=g,i.p245=D;const S=new Set;function A(t,i,e,o,h,c,a,l,d,_,m){1===r.it&&r.it.overlap();const w=h.length-1,b=t.dynamicsWorld,v=m||u(o,n.default.p163(e,i)),y=n.default.p126(e,i,r.vt),g=f(y,r.yt);p(n.default.p41(i,e,.5,r.gt),s.default.p210(g,y,r.xt)),r.ft.setCollisionShape(v),r.ft.setWorldTransform(r.ht),r.bt.addSingleResult=(t,i,e,n,s,o,h)=>{if(S.size>w)return 0;if(Ammo.wrapPointer(t,Ammo.btManifoldPoint).getDistance()>0)return 1;let u=Ammo.wrapPointer(s,Ammo.btCollisionObjectWrapper),c=u.getCollisionObject();Ammo.compare(c,r.ft)&&(u=Ammo.wrapPointer(i,Ammo.btCollisionObjectWrapper),c=u.getCollisionObject());const a=Ammo.castObject(c,Ammo.btRigidBody);return a&&a.entity?(l&&!a.entity.tags.has(...l)||d&&!d(a.entity)||S.add(a.entity),1):1},b.contactTest(r.ft,r.bt),r.ft.setCollisionShape(r.lt);let x=0;for(let t of S)h[x++]=t;return S.clear(),m||Ammo.destroy(v),x}i.p244=A;const O=new Map;function j(t,i,o,h,c,a,l,d,_,m,w){1===r.it&&r.it.overlap();const b=t.dynamicsWorld,v=w||u(h,n.default.p163(o,i)),y=n.default.p126(o,i,r.vt),g=f(y,r.yt);p(n.default.p41(i,o,.5,r.gt),s.default.p210(g,y,r.xt)),r.ft.setCollisionShape(v),r.ft.setWorldTransform(r.ht),r.bt.addSingleResult=(t,i,s,o,h,u,c)=>{let a=Ammo.wrapPointer(h,Ammo.btCollisionObjectWrapper),l=a.getCollisionObject(),f=1;Ammo.compare(l,r.ft)&&(a=Ammo.wrapPointer(i,Ammo.btCollisionObjectWrapper),l=a.getCollisionObject(),f=-1);const p=Ammo.castObject(l,Ammo.btRigidBody);if(!p||!p.entity)return 1;if(d&&!p.entity.tags.has(...d)||_&&!_(p.entity))return 1;const m=Ammo.wrapPointer(t,Ammo.btManifoldPoint),w=m.getDistance();if(w<0){const t=Math.abs(w);let i=O.get(p.entity);if(i){if(i.distance>t){i.distance=t;const e=m.get_m_normalWorldOnB();n.default.p25(i.normal,f*e.x(),f*e.y(),f*e.z())}}else{const n=m.get_m_normalWorldOnB();i={entity:p.entity,distance:t,normal:new e.p16(f*n.x(),f*n.y(),f*n.z())},O.set(p.entity,i)}}return 1},b.contactTest(r.ft,r.bt),r.ft.setCollisionShape(r.lt);let x=0;for(let t of O)c[x++]=t[1];return O.clear(),w||Ammo.destroy(v),x}i.p243=j,i.p242={p255:c,p254:a,p249:b,p250:w,p251:m,p244:A,p248:v,p246:g,p247:y,p245:D,p243:j},i.default=i.p242})),define("d25",["require","exports","d3","d8","d9"],(function(t,i,e,n,s){var o,r,h;Object.defineProperty(i,"__esModule",{value:!0}),i.p260=i.p261=i.p262=i.p263=i.p264=i.p265=i.p266=i.p267=i.p268=void 0,n=__importDefault(n),s=__importDefault(s),function(t){t[t.None=0]="None",t[t.Kinematic=1]="Kinematic",t[t.SimulatedDynamic=2]="SimulatedDynamic"}(o||(i.p268=o={})),function(t){t[t.None=0]="None",t[t.Standard=1]="Standard",t[t.Extra=2]="Extra"}(r||(i.p267=r={})),function(t){t[t.Initial=0]="Initial",t[t.AfterFirstHit=1]="AfterFirstHit",t[t.FoundBlockingCrease=2]="FoundBlockingCrease",t[t.FoundBlockingCorner=3]="FoundBlockingCorner"}(h||(i.p266=h={})),i.p265=class{constructor(){this.m=new e.p16,this.v=new e.p18,this.Ot=new e.p16,this.jt=null,this.Ct=new e.p16}},i.p264=class{constructor(t,i){this.Tt=new e.p16,this.qt=null,s.default.p24(this.Tt,t),this.qt=i}},i.p263=class{constructor(){this.Pt=new e.p16,this.kt=new e.p16,this.Rt=new e.p16,this.Et=null,this.Ft=new e.p16}It(){this.Vt=!1,this.Ht=!1,this.Nt=!1,this.Et=null,s.default.p24(this.Pt,n.default.zero),s.default.p24(this.kt,n.default.zero),s.default.p24(this.Rt,n.default.zero),s.default.p24(this.Ft,n.default.zero)}Bt(t){this.Vt=t.Vt,this.Ht=t.Ht,this.Nt=t.Nt,this.Et=null,s.default.p24(this.Pt,t.Pt),s.default.p24(this.kt,t.kt),s.default.p24(this.Rt,t.Rt),s.default.p24(this.Ft,n.default.zero)}},i.p262=class{constructor(){this.Pt=new e.p16,this.kt=new e.p16,this.Rt=new e.p16}Bt(t){this.Vt=t.Vt,this.Ht=t.Ht,this.Nt=t.Nt,s.default.p24(this.Pt,t.Pt),s.default.p24(this.kt,t.kt),s.default.p24(this.Rt,t.Rt)}},i.p261=class{constructor(){this.zt=new e.p16,this.Gt=new e.p16,this.Ut=new e.p16,this.Wt=new e.p16,this.Lt=new e.p16}},i.p260=class{constructor(){this.Jt=new e.p16,this.$t=new e.p16,this.Zt=new e.p16}}})),define("d26",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d27",["require","exports"],(function(t,i){function e(t){return/^-?\d+$/.test(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.p269=i.p270=void 0,i.p270=e,i.p269=function(t){const i=[];for(let n in t){if(!t.hasOwnProperty(n)||e(n))continue;const s={};s[n]=t[n],i.push(s)}return i}})),define("d28",["require","exports","d3","d10","d9","d7","d22"],(function(t,i,e,n,s,o,r){Object.defineProperty(i,"__esModule",{value:!0}),i.p271=void 0,n=__importDefault(n),s=__importDefault(s),o=__importDefault(o),r=__importDefault(r);const h=new e.p18;class u{constructor(){this.q=new e.p16,this.P=new e.p18,this.k=new e.p16,this.R=new e.p18,this.g=new e.p16,this.M=new e.p16}Kt(t){s.default.p24(this.q,this.Qt.getPosition()),n.default.p24(this.P,this.Qt.getRotation())}Y(t){s.default.p24(this.k,this.Qt.getPosition()),n.default.p24(this.R,this.Qt.getRotation()),s.default.p112(s.default.p126(this.k,this.q,this.g),t),n.default.p121(this.R,n.default.p205(this.P,h)),n.default.p178(h,this.M),s.default.p117(o.default.p47/t,this.M)}Yt(){const t=this.Qt.getPosition(),i=this.Qt.getRotation();s.default.p24(this.q,t),n.default.p24(this.P,i),s.default.p24(this.k,t),n.default.p24(this.R,i),this.L()}L(t=!1){var i;if(!t){const t=null===(i=this.Qt.script)||void 0===i?void 0:i.get(r.default);if(t&&t.enabled)return}this.Qt.rigidbody&&this.Qt.rigidbody.enabled&&this.Qt.rigidbody.syncEntityToBody()}}i.p271=u,i.default=u})),define("d29",["require","exports","d3","d24","d4","d7","D23","d9","d10","d8","d22","D30","d19","d27","d25","d28"],(function(t,i,e,n,s,o,r,h,u,c,a,l,f,p,d,_){Object.defineProperty(i,"__esModule",{value:!0}),i.p272=i.p273=i.p274=i.p275=i.p276=i.p277=i.p278=i.p279=i.p280=i.p281=i.p282=i.p283=i.p284=i.p285=i.p286=i.p287=i.p288=i.p289=i.p290=i.p291=i.p292=i.p293=i.p294=void 0,n=__importDefault(n),s=__importStar(s),o=__importDefault(o),r=__importDefault(r),h=__importDefault(h),u=__importDefault(u),c=__importDefault(c),a=__importDefault(a),l=__importDefault(l),_=__importDefault(_),i.p294=9,i.p293=16,i.p292=16,i.p291=2,i.p290=3,i.p289=16,i.p288=.01,i.p287=.02,i.p286=.005,i.p285=.1,i.p284=.002,i.p283=.02,i.p282=.001,i.p281=.01,i.p280=.03,i.p279=.05,i.p278=.01,i.p277=.01,i.p276=.01,i.p275=.01,i.p274=.05;class m extends s.default{constructor(){super(...arguments),this.groundDetectionExtraDistance=0,this.maxStableSlopeAngle=60,this.stableGroundLayers=-1,this.discreteCollisionEvents=!1,this.stepHandling=d.p267.Standard,this.maxStepHeight=.5,this.allowSteppingWithoutStableGrounding=!1,this.minRequiredStepDepth=.1,this.ledgeAndDenivelationHandling=!0,this.maxStableDistanceFromLedge=.5,this.maxVelocityForLedgeSnap=0,this.maxStableDenivelationAngle=180,this.interactiveRigidbodyHandling=!0,this.rigidbodyInteractionType=d.p268.None,this.simulatedCharacterMass=1,this.preserveAttachedRigidbodyMomentum=!0,this.hasPlanarConstraint=!1,this.planarConstraintAxis=new e.p16(0,0,1),this.maxMovementIterations=5,this.maxDecollisionIterations=1,this.checkMovementInitialOverlaps=!0,this.killVelocityWhenExceedMaxMovementIterations=!0,this.killRemainingMovementWhenExceedMaxMovementIterations=!0,this.Xt=new d.p263,this.ti=new d.p262,this.collidableLayers=-1,this.k=new e.p16,this.ii=new e.p16,this.ei=new e.p16,this.ni=new e.p16,this.q=new e.p16,this.P=new e.p18,this.jt=null,this.si=new e.p16,this.oi=new e.p16,this.ri=new e.p16,this.hi=new e.p16,this.ui=new e.p16,this.Ct=new e.p16,this.ci=0,this.ai=new Array(i.p289),this.li=new e.p16,this.fi=new e.p18,this.pi=null,this.di=new e.p16,this._i=new Array(i.p293),this.mi=new Array(i.p292),this.wi=new Array(16),this.bi=new Array(i.p289),this.vi=null,this.yi=!0,this.gi=!0,this.xi=!1,this.Mi=new e.p16,this.Di=!1,this.Si=new e.p18,this.Ai=0,this.Oi=!1,this.ji=!1,this.Ci=0,this.Ti=h.default.p23(c.default.up),this.qi=new e.p16(0,0,1),this.Pi=h.default.p23(c.default.right),this.ki=h.default.p23(c.default.zero),this.R=new e.p18,this.Ri=0,this.Ei=0,this.Fi=0}get Ii(){return this.k}get Vi(){return this.ii}get Hi(){return this.ei}get Ni(){return this.ni}get Bi(){return this.q}get zi(){return this.P}get Gi(){return this.jt}get Ui(){return this.si}get Wi(){return this.oi}get Li(){return this.ri}get Ji(){return this.hi}get $i(){return this.ui}get Zi(){return this.Ct}get Ki(){return this.ci}get Qi(){return this.ai}get Yi(){return this.R}set Yi(t){u.default.p24(this.R,t),u.default.p209(this.R,this.Ti,this.ii),u.default.p209(this.R,this.qi,this.ei),u.default.p209(this.R,this.Pi,this.ni)}set Ii(t){h.default.p24(this.k,t)}get Xi(){return this.Ri}get te(){return this.Ei}get ie(){return this.Fi}ee(t=new e.p16){return h.default.p129(this.di,this.Ct,t)}onEnable(){r.default.H(this.app),r.default.ne(this)}onDisable(){r.default.se(this)}onDestroy(){this.onDisable()}V(){const t=this.entity.collision.radius,i=this.entity.collision.height,e=this.entity.collision.data.linearOffset.y;this.oe(t,i,e,!0),this.maxStepHeight=o.default.p43(this.maxStepHeight,0,o.default.p72),this.minRequiredStepDepth=o.default.p43(this.minRequiredStepDepth,0,t),this.maxStableDistanceFromLedge=o.default.p43(this.maxStableDistanceFromLedge,0,t),this.entity.setLocalScale(1,1,1)}re(t){this.entity.collision.enabled=!t}he(t){this.yi=t}ue(t){this.gi=t}U(t,i=!0){this.entity.setPosition(t),h.default.p24(this.q,t),h.default.p24(this.k,t),i&&h.default.p24(this.li,t)}W(t,i=!0){this.entity.setRotation(t),u.default.p24(this.P,t),this.Yi=t,i&&u.default.p24(this.fi,t)}J(t,i,e=!0){this.entity.setPosition(t),this.entity.setRotation(i),h.default.p24(this.q,t),u.default.p24(this.P,i),h.default.p24(this.k,t),this.Yi=i,e&&(h.default.p24(this.li,t),u.default.p24(this.fi,i))}ce(t){this.xi=!0,h.default.p24(this.Mi,t)}ae(t){this.Di=!0,u.default.p24(this.Si,t)}Z(t=new d.p265){const i=t.le||new d.p262;return i.Bt(this.Xt),h.default.p24(t.m,this.k),u.default.p24(t.v,this.R),h.default.p24(t.Ot,this.di),h.default.p24(t.Ct,this.Ct),t.ji=this.ji,t.fe=this.Ci,t.pe=this.de,t.le=i,t.jt=this.jt,t}K(t,i=!0){this.J(t.m,t.v,i),h.default.p24(this.di,t.Ot),h.default.p24(this.Ct,t.Ct),this.ji=t.ji,this.Ci=t.fe,this.jt=t.jt,this.de=t.pe,this.Xt.Bt(t.le)}oe(t,i,e,n=!1){const s=t,r=i=o.default.p59(i,2*t+.01);if(this.Ri=s,this.Ei=r,this.Fi=e,n){const n=this.entity.collision;n&&(n.data.initialized=!1,n.data.radius=t,n.data.height=i,n.data.linearOffset.x=0,n.data.linearOffset.y=e,n.data.linearOffset.z=0,n.radius=s,n.height=r,n.data.initialized=!0,n.system.recreatePhysicalShapes(this.entity.collision))}h.default.p25(this.si,0,e,0);const u=this.si,c=h.default.p119(h.default.p109(this.Ti,w),.5*r),a=h.default.p120(this.Ti,.5*r,b),l=h.default.p119(h.default.p109(this.Ti,v),s),f=h.default.p120(this.Ti,s,y);h.default.p129(u,c,this.oi),h.default.p129(u,a,this.ri),h.default.p128(h.default.p129(u,c,this.hi),f),h.default.p128(h.default.p129(u,a,this.ui),l)}awake(){this.Xt=new d.p263,this.Ii=this.entity.getPosition(),this.Yi=this.entity.getRotation(),this.V()}_e(t){if((isNaN(this.di.x)||isNaN(this.di.y)||isNaN(this.di.z))&&h.default.p24(this.di,c.default.zero),(isNaN(this.Ct.x)||isNaN(this.Ct.y)||isNaN(this.Ct.z))&&h.default.p24(this.Ct,c.default.zero),this.wi.length=0,this.we.me(t),this.Ii=this.entity.getPosition(),this.Yi=this.entity.getRotation(),h.default.p24(this.q,this.k),u.default.p24(this.P,this.R),this.Ai=0,this.ci=0,this.xi){if(this.yi){const i=h.default.p126(this.Mi,this.k,g),e=this.be(i,t,x);this.ve(e,t)&&this.interactiveRigidbodyHandling&&this.ye(e,t)}else h.default.p24(this.k,this.Mi);this.xi=!1}if(this.ti.Bt(this.Xt),this.Xt.It(),h.default.p24(this.Xt.Pt,this.ii),this.yi){let t=0,n=!1;const s=new e.p16,o=[];for(;t<this.maxDecollisionIterations&&!n;){const e=this.ge(this.k,this.R,o);if(e>0){for(let t=0;t<e;t++)if(!this.xe(o[t].entity)){const e=o[t].distance;h.default.p24(s,o[t].normal);const n=this.Me(s);h.default.p24(s,this.De(s,n));const r=h.default.p120(s,e+i.p288,g);h.default.p128(this.k,r),this.ci<this.ai.length&&(this.ai[this.ci]=new d.p264(s,this.mi[t]),this.ci++);break}}else n=!0;t++}}if(this.gi)if(this.Se())h.default.p128(this.k,h.default.p120(this.ii,1.5*i.p286,g));else{let t=i.p286;if(this.ti.Nt||!this.ti.Ht&&!this.de||(t=this.stepHandling!==d.p267.None?o.default.p59(this.Ri,this.maxStepHeight):this.Ri,t+=this.groundDetectionExtraDistance),this.Ae(this.k,this.R,t,this.Xt),!this.ti.Ht&&this.Xt.Ht){h.default.p96(this.di,this.ii);const t=h.default.p94(this.di);this.Oe(this.di,this.Xt.Pt,this.di),h.default.p119(this.di,t)}}if(this.de=!1,this.ji=!1,this.Ci>0&&(this.Ci-=t),this.gi&&this.we.je(t),this.interactiveRigidbodyHandling){this.vi=this.jt,this.pi?this.jt=this.pi:this.Xt.Ht&&this.Xt.Et?this.jt=this.xe(this.Xt.Et):this.jt=null;const i=new e.p16,n=new e.p16;if(this.jt&&this.Ce(this.jt,this.k,t,i,n),this.preserveAttachedRigidbodyMomentum&&null!==this.vi&&this.vi!==this.jt&&(h.default.p128(this.di,this.Ct),h.default.p125(this.di,i)),this.jt){const e=h.default.p118(o.default.p46*t,n,g),s=u.default.p180(e);u.default.p209(s,this.ei,e),h.default.p96(e,this.ii);const r=h.default.p172(e),c=u.default.p210(r,this.ii,s);this.Yi=c,h.default.p24(this.Ct,i)}else h.default.p24(this.Ct,this.ki);if(null!==this.jt&&null===this.vi&&this.Xt.Et&&this.Xt.Et.rigidbody===this.jt){const t=h.default.p97(this.Ct,this.ii);h.default.p125(this.di,t)}if(h.default.p93(this.Ct)>0){if(this.Oi=!0,this.yi)this.ve(this.Ct,t);else{const i=h.default.p120(this.Ct,t);h.default.p128(this.k,i)}this.Oi=!1}}}Te(t){if(this.we.qe(this.R,t),this.Yi=this.R,this.Di&&(this.Yi=this.Si,this.Di=!1),this.yi&&this.interactiveRigidbodyHandling){if(this.jt){const t=this.Ri,e=h.default.p127(this.k,h.default.p120(this.ii,t)),n=this.R,s=h.default.p109(this.ii),o={value:null};if(this.Pe(e,n,s,t,o)){const e=o.value;if(e.entity.rigidbody===this.jt&&this.Me(e.normal)){const n=t-e.distance,s=h.default.p120(this.ii,n),o=h.default.p120(this.ii,i.p288);h.default.p128(this.k,s),h.default.p128(this.k,o)}}}if(this.interactiveRigidbodyHandling){const t=h.default.p23(this.Ti);let e=0,n=!1;const s=[];for(;e<this.maxDecollisionIterations&&!n;){const o=this.ge(this.k,this.R,s);if(o>0)for(let e=0;e<o;e++){const n=s[e],o=n.distance;h.default.p24(t,n.normal),h.default.p24(t,this.De(t,this.Me(t)));const r=h.default.p120(t,o+i.p288);if(h.default.p128(this.k,r),this.interactiveRigidbodyHandling){const i=this.xe(n.entity);if(i){const e=new d.p261;if(e.ke=this.Me(t),e.ke&&(this.de=e.ke),i!==this.jt){const n=this.k;this.Re(i,this.ee(),n,t,e)}}}this.ci<this.ai.length&&(this.ai[this.ci]=new d.p264(t,n.entity),this.ci++);break}else n=!0;e++}}}if(this.we.Ee(this.di,t),h.default.p94(this.di)<i.p281&&h.default.p24(this.di,c.default.zero),h.default.p93(this.di)>0)if(this.yi)this.ve(this.di,t);else{const i=h.default.p120(this.di,t);h.default.p128(this.k,i)}if(this.interactiveRigidbodyHandling&&this.ye(this.di,t),this.hasPlanarConstraint){const t=h.default.p173(this.planarConstraintAxis);h.default.p125(this.k,this.q),h.default.p96(this.k,t),h.default.p127(this.q,this.k)}if(this.discreteCollisionEvents){const t=this.Fe(this.k,this.R,this.mi,2*i.p288);for(let i=0;i<t;i++)this.we.Ie(this.mi[i])}this.we.Ve(t)}Me(t){return this.He(this.ii,t)}He(t,e){return h.default.p105(t,e)<=this.maxStableSlopeAngle+i.p275}Ne(t,e){if(this.ledgeAndDenivelationHandling){if(t.Be){if(t.ze){const i=h.default.p100(e,t.Lt);if(h.default.p94(i)>=this.maxVelocityForLedgeSnap)return!1}if(t.Ge&&t.Ue>this.maxStableDistanceFromLedge)return!1}if(this.ti.Vt&&0!==h.default.p93(t.zt)&&0!==h.default.p93(t.Gt)){let e=h.default.p105(t.zt,t.Gt);if(e>this.maxStableDenivelationAngle+i.p275)return!1;if(e=h.default.p105(this.ti.kt,t.Gt),e>this.maxStableDenivelationAngle+i.p275)return!1}}return!0}Ae(t,e,n,s){n<i.p286&&(n=i.p286);let r=0,c=!1,a=n;const l=M,f=h.default.p24(D,t),p=u.default.p208(e,h.default.p109(this.Ti,S));for(;a>0&&r<=i.p291&&!c;){if(this.Pe(f,e,p,a,l)){const n=l.value,r=new d.p261,_=h.default.p127(f,h.default.p120(p,n.distance,A));if(this.We(n.entity,n.normal,n.point,_,this.R,this.di,r),s.Vt=!0,s.Nt=!1,s.Et=n.entity,h.default.p24(s.kt,r.zt),h.default.p24(s.Rt,r.Gt),h.default.p24(s.Pt,n.normal),h.default.p24(s.Ft,n.point),r.ke)s.Nt=!this.Ne(r,this.di),s.Ht=!0,s.Nt||(h.default.p120(p,n.distance-i.p288,t),h.default.p127(f,t)),this.we.Le(n.entity,n.normal,n.point,r),c=!0;else{const t=h.default.p127(h.default.p120(p,n.distance,O),h.default.p119(u.default.p209(e,this.Ti,j),o.default.p59(i.p288,n.distance)));h.default.p128(f,t),a=o.default.p58(i.p287,o.default.p59(a-h.default.p94(t),0)),h.default.p172(h.default.p96(p,n.normal))}}else c=!0;r++}}Je(t=.1){this.ji=!0,this.Ci=t}Se(){return this.ji||this.Ci>0}Oe(t,i,n=new e.p16){const s=h.default.p169(t,this.ii,C);return h.default.p172(h.default.p169(i,s,n))}ve(t,n){if(n<=0)return!1;this.hasPlanarConstraint&&h.default.p96(t,h.default.p173(this.planarConstraintAxis));let s=!0,r=0,a=!0,l=!1;const f=h.default.p23(this.k),p=h.default.p23(this.ki),_=h.default.p23(this.ki),m={value:d.p266.Initial},w={value:h.default.p94(t)*n},b=h.default.p173(t),v=h.default.p23(b);for(let i=0;i<this.ci;i++){const e=h.default.p23(this.ai[i].Tt);if(h.default.p159(b,e)<0){const i=this.Me(e)&&!this.Se(),n=h.default.p23(t),s=this.De(e,i);this.$e(i,e,s,v,m,l,p,_,t,w,b),l=i,h.default.p24(p,n),h.default.p24(_,s)}}const y=new e.p16,g=new e.p16,x=[];for(;w.value>0&&r<=this.maxMovementIterations&&a;){let e=!1,n=0,M=null;if(h.default.p25(y,0,0,0),h.default.p25(g,0,0,0),this.checkMovementInitialOverlaps){const t=this.ge(f,this.R,x,void 0,0,!1);if(t>0){n=0;let i=2;for(let n=0;n<t;n++){const t=x[n],s=t.distance,o=t.normal,r=h.default.p159(b,o);r<0&&r<i&&(i=r,M=t.entity,e=!0,h.default.p24(g,o),h.default.p24(y,f),h.default.p128(y,u.default.p209(this.R,this.Ui)),h.default.p128(y,h.default.p120(o,s)))}}}if(!e){const t={value:null};if(this.Ze(f,this.R,b,w.value+i.p288,t,this._i)>0){const i=t.value;n=i.distance,M=i.entity,h.default.p24(g,i.normal),h.default.p24(y,i.point),e=!0}}if(e&&M){const e=h.default.p120(b,o.default.p59(0,n-i.p288));h.default.p128(f,e),w.value-=h.default.p94(e);const s=new d.p261;this.We(M,g,y,f,this.R,t,s);let r=!1;if(this.gi&&s.Ke&&this.stepHandling!==d.p267.None&&o.default.p69(h.default.p159(g,this.ii))<=i.p278){const e=h.default.p172(h.default.p96(h.default.p109(g),this.ii)),n=h.default.p128(h.default.p127(f,h.default.p120(e,i.p280)),h.default.p120(this.ii,this.maxStepHeight)),o=h.default.p109(this.ii),u={value:null},c=this.Ze(n,this.R,o,this.maxStepHeight,u,this._i,0,!0);for(let e=0;e<c;e++){const u=this._i[e];if(u.entity===s.Qe){r=!0,h.default.p127(n,h.default.p120(o,u.distance-i.p288,f)),h.default.p96(t,this.ii),h.default.p173(t,b);break}}}if(!r&&M){const i=this.De(g,s.ke);this.we.Ye(M,g,y,s),this.interactiveRigidbodyHandling&&M.rigidbody&&this.Re(M.rigidbody,t,y,i,s);const e=s.ke&&!this.Se(),n=h.default.p23(t);this.$e(e,g,i,v,m,l,p,_,t,w,b),l=e,h.default.p24(p,n),h.default.p24(_,i)}}else a=!1;r++,r>this.maxMovementIterations&&(this.killRemainingMovementWhenExceedMaxMovementIterations&&(w.value=0),this.killVelocityWhenExceedMaxMovementIterations&&h.default.p24(t,c.default.zero),s=!1)}return h.default.p127(f,h.default.p120(b,w.value,this.k)),s}De(t,i,n=new e.p16){const s=h.default.p24(T,t);return!this.Xt.Ht||this.Se()||i||(h.default.p172(h.default.p167(this.Xt.Pt,s)),h.default.p172(h.default.p168(s,this.ii))),0===h.default.p93(s)&&h.default.p24(s,t),h.default.p24(n,s)}Re(t,i,e,n,o){if(this.Ai<this.bi.length&&!(0,s.p21)(t.entity,m)){const s=new d.p260;s.Xe=t,s.tn=o.ke,h.default.p24(s.Jt,e),h.default.p24(s.$t,n),h.default.p24(s.Zt,i),this.bi[this.Ai]=s,this.Ai++}}$e(t,i,e,n,s,o,r,u,a,l,f){if(h.default.p93(a)<=0)return;const p=h.default.p24(P,a);if(t)this.de=!0,this.en(a,e,t);else if(s.value===d.p266.Initial)this.en(a,e,t),s.value=d.p266.AfterFirstHit;else if(s.value===d.p266.AfterFirstHit){const i=q,n=k,l=this.Xt.Ht&&!this.Se();this.nn(a,r,e,u,t,o,l,i,n),i.value?this.Xt.Ht&&!this.Se()?(h.default.p24(a,c.default.zero),s.value=d.p266.FoundBlockingCorner):(h.default.p99(a,n),s.value=d.p266.FoundBlockingCrease):this.en(a,e,t)}else s.value==d.p266.FoundBlockingCrease&&(h.default.p24(a,c.default.zero),s.value=d.p266.FoundBlockingCorner);this.hasPlanarConstraint&&h.default.p96(a,h.default.p173(this.planarConstraintAxis,R));const _=h.default.p94(a)/h.default.p94(p);l.value*=_,h.default.p173(a,f)}nn(t,i,e,n,s,o,r,u,a){if(u.value=!1,h.default.p24(a,c.default.zero),!r||!s||!o){const s=h.default.p172(h.default.p169(e,n,E));let o=!1;if(h.default.p159(e,n)<.999){const t=h.default.p172(h.default.p97(e,s,F)),r=h.default.p172(h.default.p97(n,s,I)),u=h.default.p159(t,r),c=h.default.p108(h.default.p172(h.default.p97(i,s,V)));u<=h.default.p159(c,t)+.001&&u<=h.default.p159(c,r)+.001&&(o=!0)}o&&(h.default.p159(s,t)<0&&h.default.p108(s),u.value=!0,h.default.p24(a,s))}}en(t,i,e){if(this.Xt.Ht&&!this.Se()){const n=h.default.p94(t);if(e)this.Oe(t,i,t),h.default.p119(t,n);else{const e=h.default.p172(h.default.p169(i,this.Xt.Pt,H)),s=h.default.p172(h.default.p169(e,i,N));h.default.p119(this.Oe(t,s,t),n),h.default.p96(t,i)}}else if(e){h.default.p96(t,this.ii);const e=h.default.p94(t);h.default.p119(this.Oe(t,i,t),e)}else h.default.p96(t,i)}sn(t,i,e){}ye(t,i){const e=this.jt?this.rn(this.jt.entity):null;for(let n=0;n<this.Ai;n++){const o=this.bi[n];if(o&&o.Xe!==this.jt&&!this.wi.includes(o.Xe)){this.wi.push(o.Xe);const n=this.simulatedCharacterMass,r=o.Zt,u=(0,s.p21)(o.Xe.entity,m),a=null!=u;let l=!1,f=1,p=1,w=c.default.zero;if(a)f=u.simulatedCharacterMass,p=u.simulatedCharacterMass,w=u.di;else if(o.Xe.isKinematic()){const t=o.Xe.entity,i=this.hn(t);i&&(e&&i instanceof _.default&&e.un===i.un||(w=i.g))}else o.Xe.isStatic()||(l=!0,f=o.Xe.mass,p=o.Xe.mass,w=o.Xe.linearVelocity);let b=n+p>0?n/(n+p):.5;l?this.rigidbodyInteractionType!==d.p268.Kinematic||a||(b=1):b=0,this.cn(o.$t,r,w,b,B,z),h.default.p128(t,B),a?h.default.p128(u.di,B):l&&o.Xe.applyForce(z,o.Jt),this.rigidbodyInteractionType===d.p268.SimulatedDynamic&&this.sn(t,o,i)}}}cn(t,i,e,n,s,o){h.default.p24(s,c.default.zero),h.default.p24(o,c.default.zero);const r=1-n,u=h.default.p159(i,t),a=h.default.p159(e,t);if(u<0){const i=h.default.p120(t,u,G);h.default.p128(s,i)}if(a>u){const i=h.default.p120(t,a-u,U);h.default.p128(s,h.default.p120(i,r,W)),h.default.p128(o,h.default.p119(h.default.p108(i),n))}}an(t){return t!==this.entity&&!!this.ln(t)}ln(t){const i=t.rigidbody;if(i){const t=i.isStaticOrKinematic();if(this.Oi&&(!t||i===this.jt))return!1;if(!t&&this.rigidbodyInteractionType===d.p268.Kinematic)return i&&i.activate(),!1}return!!this.we.fn(t)&&!!i}We(t,e,n,s,o,r,c){if(!this.gi)return void(c.ke=!1);const a=u.default.p209(o,this.Ti,$),l=h.default.p109(a,Z),f=h.default.p172(h.default.p97(e,a,K));if(c.ke=this.Me(e),c.pn=!1,c.dn=!1,h.default.p24(c.zt,e),h.default.p24(c.Gt,e),this.ledgeAndDenivelationHandling){let t=i.p279;this.stepHandling!==d.p267.None&&(t=this.maxStepHeight);let p=!1,_=!1;const m=L,w=h.default.p128(h.default.p127(n,h.default.p120(a,i.p283,Q)),h.default.p120(f,i.p282,Y));if(this._n(w,l,t+i.p283,m,this._i)>0){const t=m.value.normal;h.default.p24(c.zt,t),c.pn=!0,p=this.Me(t)}const b=J,v=h.default.p128(h.default.p127(n,h.default.p120(a,i.p283,Q)),h.default.p119(h.default.p109(f,Y),i.p282));if(this._n(v,l,t+i.p283,b,this._i)>0){const t=b.value.normal;h.default.p24(c.Gt,t),c.dn=!0,_=this.Me(t)}c.Be=p!==_,c.Be&&(c.Ge=_&&!p,h.default.p24(c.Ut,_?c.Gt:c.zt),h.default.p172(h.default.p169(e,c.Ut,c.Wt)),h.default.p172(h.default.p96(h.default.p169(c.Ut,c.Wt,c.Lt),this.ii)),c.Ue=h.default.p94(h.default.p96(h.default.p124(n,h.default.p127(s,u.default.p209(o,this.oi,X))),a)),c.ze=h.default.p159(h.default.p173(r,tt),c.Lt)>0),c.ke&&(c.ke=this.Ne(c,r))}if(this.stepHandling!==d.p267.None&&!c.ke){const i=t.rigidbody;i&&!i.isStaticOrKinematic()||(this.mn(s,o,n,f,c),c.Ke&&(c.ke=!0))}this.we.wn(t,e,n,s,o,c)}mn(t,e,n,s,o){const r=it,c=et,a=u.default.p209(e,this.Ti,nt),l=h.default.p109(a,st),f=h.default.p99(h.default.p126(n,t,ot),a),p=h.default.p172(h.default.p96(h.default.p126(n,t,rt),a)),_=h.default.p126(n,f,ht);h.default.p128(_,h.default.p120(a,this.maxStepHeight,ut)),h.default.p128(_,h.default.p120(p,3*i.p288,ct));let m=this.Ze(_,e,l,this.maxStepHeight+i.p288,c,this._i,0,!0);this.bn(m,t,e,s,_,r)&&(o.Ke=!0,o.Qe=r.value),this.stepHandling!==d.p267.Extra||o.Ke||(h.default.p24(_,t),h.default.p128(_,h.default.p120(a,this.maxStepHeight,at)),h.default.p128(_,h.default.p119(h.default.p109(s,lt),this.minRequiredStepDepth)),m=this.Ze(_,e,l,this.maxStepHeight-i.p288,c,this._i,0,!0),this.bn(m,t,e,s,_,r)&&(o.Ke=!0,o.Qe=r.value))}bn(t,e,n,s,o,r){r.value=null;const a=u.default.p209(n,c.default.up,ft),l=h.default.p109(a,pt);let f=!1;for(;t>0&&!f;){let u,p=0,d=0;for(let i=0;i<t;i++){const t=this._i[i].distance;t>p&&(p=t,u=this._i[i],d=i)}const _=u?u.distance:0,m=u?h.default.p24(dt,u.point):c.default.zero,w=u?u.entity:null,b=h.default.p127(o,h.default.p120(l,_-3*i.p288,_t));if(this.Fe(b,n,this.mi)<1){const t=h.default.p120(a,i.p283,mt),o=h.default.p119(h.default.p109(s,wt),i.p282),u=h.default.p127(m,h.default.p129(t,o,bt)),c=l,p=this.maxStepHeight+i.p283,d=gt;if(this._n(u,c,p,d,this._i,!0)>0){const t=d.value;if(this.Me(t.normal)){const t={value:null};if(this.Ze(e,n,a,this.maxStepHeight-_,t,this._i)<=0){let t=!1;const n=xt;if(this.allowSteppingWithoutStableGrounding)t=!0;else{const i=h.default.p127(e,h.default.p99(h.default.p126(b,e,vt),a)),s=l;this._n(i,s,this.maxStepHeight,n,this._i,!0)>0&&this.Me(n.value.normal)&&(t=!0)}if(!t){const e=h.default.p127(m,h.default.p120(s,i.p282,yt)),o=l;this._n(e,o,this.maxStepHeight,n,this._i,!0)>0&&this.Me(n.value.normal)&&(t=!0)}if(t)return r.value=w,f=!0,!0}}}}f||d<--t&&(this._i[d]=this._i[t])}return!1}Ce(t,i,e,n,s){if(h.default.p24(n,c.default.zero),h.default.p24(s,c.default.zero),e>0){let r;if(t.isStaticOrKinematic()){const i=this.hn(t.entity);i&&(h.default.p24(n,i.g),h.default.p24(s,i.M),r=i.q)}else h.default.p24(n,t.linearVelocity),h.default.p24(s,t.angularVelocity);if(h.default.p132(s,c.default.zero)){const c=r||t.entity.getPosition(),a=h.default.p126(i,c,Mt),l=h.default.p118(o.default.p46*e,s,Dt),f=u.default.p180(l,At),p=h.default.p127(c,u.default.p209(f,a,St));h.default.p128(n,h.default.p112(h.default.p126(p,i),e))}}}rn(t){return this.we.vn(t)?l.default.yn(t):null}gn(t){return!!this.we.vn(t)&&l.default.xn(t)}Mn(t){const i=(0,s.p21)(t,a.default);return!(!i||!i.enabled)||this.gn(t)}hn(t){const i=(0,s.p21)(t,a.default);if(i&&i.enabled)return i;const e=this.rn(t);return e&&e.un.enabled?e:null}xe(t){const i=t.rigidbody;if(i){if(!i.isStaticOrKinematic())return i;if(this.Mn(t))return i}return null}Dn(t,i,n,s=new e.p16){const o=h.default.p126(i,t,s);return this.be(o,n,s)}be(t,i,n=new e.p16){return i<=0?h.default.p24(n,c.default.zero):h.default.p113(t,i,n)}ge(t,i,e,s,o=0,r=!1){const a=h.default.p127(t,u.default.p209(i,this.hi,Ot)),l=h.default.p127(t,u.default.p209(i,this.ui,jt));return 0!==o&&(h.default.p128(a,u.default.p208(i,h.default.p120(c.default.down,o,Ct))),h.default.p128(l,u.default.p208(i,h.default.p120(c.default.up,o,Ct)))),n.default.p243(this.app.systems.rigidbody,a,l,this.Ri+o,e,void 0,void 0,void 0,(t=>s?this.an(t)&&s(t):this.an(t)))}Fe(t,i,e,s=0,o=!1){const r=h.default.p127(t,u.default.p209(i,this.hi,Ot)),a=h.default.p127(t,u.default.p209(i,this.ui,jt));0!==s&&(h.default.p128(r,u.default.p208(i,h.default.p120(c.default.down,s,Ct))),h.default.p128(a,u.default.p208(i,h.default.p120(c.default.up,s,Ct))));const l=n.default.p244(this.app.systems.rigidbody,r,a,this.Ri+s,e,void 0,void 0,void 0,void 0,void 0,void 0);let f=l;for(let t=l-1;t>=0;t--)this.an(e[t])||(f--,t<f&&(e[t]=e[f]));return f}Sn(t,i,e,s=0){const o=h.default.p127(t,u.default.p209(i,this.hi,Tt)),r=h.default.p127(t,u.default.p209(i,this.ui,qt));0!==s&&(h.default.p128(o,u.default.p208(i,h.default.p120(c.default.down,s,Pt))),h.default.p128(r,u.default.p208(i,h.default.p120(c.default.up,s,Pt))));const a=n.default.p244(this.app.systems.rigidbody,o,r,this.Ri+s,e,void 0,void 0,void 0,void 0,void 0,void 0);let l=a;for(let t=a-1;t>=0;t--)e[t]===this.entity&&(l--,t<l&&(e[t]=e[l]));return l}Ze(t,e,s,r,a,l,f=0,p=!1){const d=h.default.p120(s,i.p284,kt),_=h.default.p127(t,h.default.p125(u.default.p209(e,this.hi,Rt),d)),m=h.default.p127(t,h.default.p125(u.default.p209(e,this.ui,Et),d));0!==f&&(h.default.p128(_,u.default.p208(e,h.default.p120(c.default.down,f,Ft))),h.default.p128(m,u.default.p208(e,h.default.p120(c.default.up,f,Ft))));const w=n.default.p248(this.app.systems.rigidbody,_,m,this.Ri+f,s,l,r+i.p284);let b=null,v=o.default.p72,y=w;for(let t=w-1;t>=0;t--){l[t].distance-=i.p284;const e=l[t],n=e.distance;n<=0||!this.an(e.entity)?(y--,t<y&&(l[t]=l[y])):n<v&&(b=e,v=n)}return a.value=b?b.clone():null,y}An(t,i,e,s,r,a,l=0){let f=null;const p=h.default.p127(t,u.default.p209(i,this.hi,It)),d=h.default.p127(t,u.default.p209(i,this.ui,Vt));0!==l&&(h.default.p128(p,u.default.p208(i,h.default.p120(c.default.down,l,Ht))),h.default.p128(d,u.default.p208(i,h.default.p120(c.default.up,l,Ht))));const _=n.default.p248(this.app.systems.rigidbody,p,d,this.Ri+l,e,a,s);let m=o.default.p72,w=_;for(let t=_-1;t>=0;t--){const i=a[t],e=i.distance;e<=0||i.entity===this.entity?(w--,t<w&&(a[t]=a[w])):e<m&&(f=i,m=e)}return r.value=f?f.clone():null,w}Pe(t,e,s,r,c){const a=h.default.p120(s,i.p285,Nt),l=h.default.p127(t,h.default.p125(u.default.p209(e,this.hi,Bt),a)),f=h.default.p127(t,h.default.p125(u.default.p209(e,this.ui,zt),a)),p=n.default.p248(this.app.systems.rigidbody,l,f,this.Ri,s,this._i,r+i.p285);let d=!1,_=o.default.p72,m=null;for(let t=0;t<p;t++){const e=this._i[t],n=e.distance;n>0&&this.an(e.entity)&&n<_&&(m=e,m.distance-=i.p285,_=n,d=!0)}return c.value=m?m.clone():null,d}_n(t,i,e,s,r,h=!1){const u=n.default.p250(this.app.systems.rigidbody,t,i,r,e);let c=null,a=o.default.p72,l=u;for(let t=u-1;t>-1;t--){const i=r[t],e=i.hitFraction;e<=0||!this.an(i.entity)?(l--,t<l&&(r[t]=r[l])):e<a&&(c=i,a=e)}return s.value=c?c.clone():null,l}}i.p273=m,new e.p16;const w=new e.p16,b=new e.p16,v=new e.p16,y=new e.p16,g=(new e.p16,new e.p16),x=new e.p16,M=(new e.p18,{value:null}),D=new e.p16,S=new e.p16,A=new e.p16,O=new e.p16,j=new e.p16,C=new e.p16,T=new e.p16,q={value:!1},P=new e.p16,k=new e.p16,R=new e.p16,E=new e.p16,F=new e.p16,I=new e.p16,V=new e.p16,H=new e.p16,N=new e.p16,B=new e.p16,z=new e.p16,G=new e.p16,U=new e.p16,W=new e.p16,L={value:null},J={value:null},$=new e.p16,Z=new e.p16,K=new e.p16,Q=new e.p16,Y=new e.p16,X=new e.p16,tt=new e.p16,it={value:null},et={value:null},nt=new e.p16,st=new e.p16,ot=new e.p16,rt=new e.p16,ht=new e.p16,ut=new e.p16,ct=new e.p16,at=new e.p16,lt=new e.p16,ft=new e.p16,pt=new e.p16,dt=new e.p16,_t=new e.p16,mt=new e.p16,wt=new e.p16,bt=new e.p16,vt=new e.p16,yt=new e.p16,gt={value:null},xt={value:null},Mt=new e.p16,Dt=new e.p16,St=new e.p16,At=new e.p18,Ot=new e.p16,jt=new e.p16,Ct=new e.p16,Tt=new e.p16,qt=new e.p16,Pt=new e.p16,kt=new e.p16,Rt=new e.p16,Et=new e.p16,Ft=new e.p16,It=new e.p16,Vt=new e.p16,Ht=new e.p16,Nt=new e.p16,Bt=new e.p16,zt=new e.p16;i.default=m,i.p272="KinematicCharacterMotor",pc.registerScript(m,i.p272),(0,f.p236)(m,"groundDetectionExtraDistance",{type:"number",default:0}),(0,f.p236)(m,"maxStableSlopeAngle",{type:"number",min:0,max:89,default:60}),(0,f.p236)(m,"stableGroundLayers",{type:"number",default:-1}),(0,f.p236)(m,"discreteCollisionEvents",{type:"boolean",default:!1}),(0,f.p236)(m,"stepHandling",{type:"number",enum:(0,p.p269)(d.p267),default:d.p267.Standard}),(0,f.p236)(m,"maxStepHeight",{type:"number",default:.5}),(0,f.p236)(m,"allowSteppingWithoutStableGrounding",{type:"boolean",default:!1}),(0,f.p236)(m,"minRequiredStepDepth",{type:"number",default:.1}),(0,f.p236)(m,"ledgeAndDenivelationHandling",{type:"boolean",default:!0}),(0,f.p236)(m,"maxStableDistanceFromLedge",{type:"number",default:.5}),(0,f.p236)(m,"maxVelocityForLedgeSnap",{type:"number",default:.1}),(0,f.p236)(m,"maxStableDenivelationAngle",{type:"number",min:1,max:180,default:180}),(0,f.p236)(m,"interactiveRigidbodyHandling",{type:"boolean",default:!0}),(0,f.p236)(m,"rigidbodyInteractionType",{type:"number",enum:(0,p.p269)(d.p268),default:d.p268.None}),(0,f.p236)(m,"simulatedCharacterMass",{type:"number",default:1}),(0,f.p236)(m,"preserveAttachedRigidbodyMomentum",{type:"boolean",default:!0}),(0,f.p236)(m,"hasPlanarConstraint",{type:"boolean",default:!1}),(0,f.p236)(m,"planarConstraintAxis",{type:"vec3",default:[0,0,1]}),(0,f.p236)(m,"maxMovementIterations",{type:"number",min:0,default:5}),(0,f.p236)(m,"maxDecollisionIterations",{type:"number",min:0,default:1}),(0,f.p236)(m,"checkMovementInitialOverlaps",{type:"boolean",default:!0}),(0,f.p236)(m,"killVelocityWhenExceedMaxMovementIterations",{type:"boolean",default:!0}),(0,f.p236)(m,"killRemainingMovementWhenExceedMaxMovementIterations",{type:"boolean",default:!0})})),define("D23",["require","exports","d4","d13","d19"],(function(t,i,e,n,s){let o;Object.defineProperty(i,"__esModule",{value:!0}),i.p295=i.p296=i.p297=i.p298=i.p299=void 0,e=__importDefault(e),i.p299="PhysicsMover",i.p298="CompoundPhysicsMover",i.p297=new WeakMap;const r=new Set,h=new Set,u=new Set;function c(t,i,e,n){for(const i of e)i.Y(t);for(const i of n)i.Y(t);for(const e of i)e._e(t);for(const t of e)t.On();for(const t of n)t.entity.rigidbody.teleport(t.k,t.R);for(const e of i)e.Te(t),e.entity.setPosition(e.Ii),e.entity.setRotation(e.Yi)}class a extends e.default{static jn(t,i,e,n){c(t,i,e,n)}static H(t){if(!o){const i=new pc.Entity("KinematicCharacterSystem");i.addComponent("script"),i.script.create("KinematicCharacterSystem"),t.root.addChild(i)}}static Cn(){return o}static Tn(t){t<r.size&&(t=r.size)}static ne(t){r.add(t)}static se(t){r.delete(t)}static qn(t){t<u.size&&(t=u.size)}static Pn(t){h.add(t)}static kn(t){h.delete(t)}static N(t){u.add(t)}static B(t){u.delete(t)}awake(){o=this}onDisable(){this.entity.destroy()}update(t){this.fixedUpdate(t)}fixedUpdate(t){this.autoSimulation&&c(t,r,h,u)}lateUpdate(t){this.debug&&function(){for(const t of h)n.p231.drawDebugInfo(t.entity);for(const t of u)n.p231.drawDebugInfo(t.entity);for(const t of r)n.p231.drawDebugInfo(t.entity)}()}}i.p296=a,i.default=a,i.p295="KinematicCharacterSystem",pc.registerScript(a,i.p295),(0,s.p236)(a,"debug",{type:"boolean",default:!1}),(0,s.p236)(a,"autoSimulation",{type:"boolean",default:!0}),(0,s.p236)(a,"interpolate",{type:"boolean",default:!1}),(0,s.p236)(a,"motorsListInitialCapacity",{type:"number",min:0,default:100}),(0,s.p236)(a,"moversListInitialCapacity",{type:"number",min:0,default:100})})),define("d31",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p300=void 0,i.p300=function(t,i,e=0){let n=t.children,s=n.length;if(s<1)return;let o=t,r=0;const h=[e];for(;e<s;){const t=n[e],u=i(t,e,r);if(2===u)return 2;if(h[r]=++e,1!==u){const i=t.children,u=i.length;if(u>0){e=0,o=t,n=i,s=u,r++,h.push(e);continue}}for(;e===s&&r>0;)h.pop(),e=h[--r],o=o.parent,n=o.children,s=n.length}}})),define("D30",["require","exports","d4","d3","d10","d9","d7","D23","d19","d31","d20","d28","d22"],(function(t,i,e,n,s,o,r,h,u,c,a,l,f){Object.defineProperty(i,"__esModule",{value:!0}),i.p301=void 0,e=__importStar(e),s=__importDefault(s),o=__importDefault(o),r=__importDefault(r),h=__importStar(h),a=__importDefault(a),l=__importDefault(l),f=__importDefault(f);class p extends e.default{constructor(){super(...arguments),this.moveWithPhysics=!0,this.S=new n.p16,this.A=new n.p18,this.O=new n.p16,this.j=new n.p18,this.g=new n.p16,this.M=new n.p16,this.C=new n.p16,this.T=new n.p18,this.q=new n.p16,this.P=new n.p18,this.k=new n.p16,this.R=new n.p18,this.Rn=new Map}F(t=new n.p16){return o.default.p126(this.k,this.q,t)}I(t=new n.p18){return s.default.p122(s.default.p205(this.P,t),this.R)}get parentMover(){return this.En}V(){}onEnable(){h.default.H(this.app),h.default.Pn(this),this.Fn()}onDisable(){h.default.kn(this),this.Rn.clear()}start(){this.V();const t=this.entity.getPosition(),i=this.entity.getRotation();o.default.p24(this.k,t),s.default.p24(this.R,i),o.default.p24(this.q,t),s.default.p24(this.P,i),o.default.p24(this.S,t),s.default.p24(this.A,i);const e=new a.default;e.m=this.k,e.v=this.R,e.g=this.g,e.M=this.M,this.G=e}static yn(t){return h.p297.get(t)||null}static xn(t){return h.p297.has(t)}In(){for(let[t,i]of this.Rn){const n=(0,e.p21)(t,f.default);n&&n.enabled||i.Yt()}}U(t){this.entity.setPosition(t),o.default.p24(this.q,t),o.default.p24(this.k,t),this.In()}W(t){this.entity.setRotation(t),s.default.p24(this.P,t),s.default.p24(this.R,t),this.In()}J(t,i){this.entity.setPosition(t),this.entity.setRotation(i),o.default.p24(this.q,t),s.default.p24(this.P,i),o.default.p24(this.k,t),s.default.p24(this.R,i),this.In()}Z(){return this.G}Vn(t){return this.Rn.get(t)||null}K(t){this.J(t.m,t.v),o.default.p24(this.g,t.g),o.default.p24(this.M,t.M)}Hn(t,i,e=new n.p16){s.default.p121(this.P,s.default.p205(this.R,m));const h=t.getRotation(),u=s.default.p123(m,h,w);return s.default.p121(h,s.default.p205(u,m)),s.default.p178(m,e),o.default.p117(r.default.p47/i,e)}Nn(t,i,e=new n.p16){s.default.p121(this.P,s.default.p205(this.R,m)),o.default.p126(this.k,this.q,d);const r=t.getPosition(),h=o.default.p125(o.default.p128(s.default.p208(m,o.default.p126(r,this.k,_)),this.k),d);return o.default.p112(o.default.p126(r,h,e),i)}Bn(t,i,e,n){s.default.p121(this.P,s.default.p205(this.R,m)),o.default.p126(this.k,this.q,d);const h=t.getPosition(),u=t.getRotation(),c=o.default.p125(o.default.p128(s.default.p208(m,o.default.p126(h,this.k,_)),this.k),d),a=s.default.p123(m,u,w);o.default.p112(o.default.p126(h,c,e),i),s.default.p121(u,s.default.p205(a,m)),s.default.p178(m,n),o.default.p117(r.default.p47/i,n)}Y(t){o.default.p24(this.q,this.k),s.default.p24(this.P,this.R);for(let[,i]of this.Rn)i.Kt(t);this.X&&this.X.tt(this.k,this.R,t),t>0&&(o.default.p112(o.default.p126(this.k,this.q,this.g),t),s.default.p121(this.R,s.default.p205(this.P,m)),s.default.p178(m,this.M),o.default.p117(r.default.p47/t,this.M)),this.entity.setPosition(this.k),this.entity.setRotation(this.R);for(let[,i]of this.Rn)i.Y(t);this.entity.setPosition(this.q),this.entity.setRotation(this.P)}On(){this.entity.setPosition(this.k),this.entity.setRotation(this.R);for(let[,t]of this.Rn)t.L()}Fn(){const t=[];(0,c.p300)(this.entity,(i=>{const n=(0,e.p21)(i,p);return n?(t.push(n),1):(this.zn(i),(0,e.p21)(i,f.default)?1:void 0)}))}Gn(t){t.on(n.p1.EVENT_DESTROY,this.Un,this)}Wn(t){t.off(n.p1.EVENT_DESTROY,this.Un,this)}Ln(t,i){this.Wn(t),this.Rn.delete(t)}zn(t){if(!t.rigidbody)return;let i=h.p297.get(t);i||(i=new l.default,i.un=this,i.Qt=t,h.p297.set(t,i)),i.un!==this&&(i.un.Ln(t,i),i.un=this),this.Wn(t),this.Gn(t),this.Rn.set(t,i)}Un(t){this.Wn(t),this.Rn.delete(t);const i=h.p297.get(t);i&&i.un===this&&h.p297.delete(t)}}i.p301=p;const d=new n.p16,_=new n.p16,m=new n.p18,w=new n.p18;i.default=p,pc.registerScript(p,h.p298),(0,u.p236)(p,"moveWithPhysics",{type:"boolean",default:!0})})),define("d32",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p302=void 0;class e{constructor(){this.autoSimulation=!0,this.interpolate=!0,this.motorsListInitialCapacity=100,this.moversListInitialCapacity=100}}i.p302=e,i.default=e})),define("d33",["require","exports","d4","d24","d10","d9","d7","d3","d8","d19"],(function(t,i,e,n,s,o,r,h,u,c){Object.defineProperty(i,"__esModule",{value:!0}),i.p303=i.p304=i.p305=void 0,e=__importDefault(e),n=__importDefault(n),s=__importDefault(s),o=__importDefault(o),r=__importDefault(r),u=__importDefault(u),i.p305=32;class a extends e.default{constructor(){super(...arguments),this.followPointFraming=new h.p17(0,0),this.followingSharpness=1e4,this.handleObstructions=!0,this.defaultDistance=6,this.minDistance=0,this.maxDistance=10,this.distanceMovementSpeed=5,this.distanceMovementSharpness=10,this.invertX=!1,this.invertY=!1,this.defaultVerticalAngle=20,this.minVerticalAngle=-90,this.maxVerticalAngle=90,this.rotationSpeed=1,this.rotationSharpness=1e4,this.rotateWithPhysicsMover=!1,this.obstructionCheckRadius=.2,this.obstructionLayers=-1,this.obstructionSharpness=1e4,this.ignoredColliders=new Array,this.planarDirection=new h.p16,this.targetDistance=0,this.Jn=!1,this.$n=0,this.Zn=0,this.Kn=null,this.Qn=0,this.Yn=new Array(i.p305),this.Xn=0,this.ts=new h.p16}awake(){this.defaultDistance=r.default.p43(this.defaultDistance,this.minDistance,this.maxDistance),this.defaultVerticalAngle=r.default.p43(this.defaultVerticalAngle,this.minVerticalAngle,this.maxVerticalAngle),this.$n=this.defaultDistance,this.targetDistance=this.$n,this.Zn=0,o.default.p24(this.planarDirection,u.default.forward)}es(t){this.followTransform=t,t&&(o.default.p24(this.planarDirection,this.followTransform.forward),o.default.p24(this.ts,this.followTransform.getPosition()))}ns(t,i,e){if(!this.followTransform)return;const h=o.default.p23(e);this.invertX&&(h.x*=-1),this.invertY&&(h.y*=-1);const u=this.followTransform.up,c=h.x*this.rotationSpeed,a=s.default.p181(u.x*c,u.y*c,u.z*c);s.default.p208(a,this.planarDirection),o.default.p167(u,o.default.p168(this.planarDirection,u));const l=s.default.p210(this.planarDirection,u);this.Zn-=h.y*this.rotationSpeed,this.Zn=r.default.p43(this.Zn,this.minVerticalAngle,this.maxVerticalAngle);const f=s.default.p181(this.Zn,0,0),p=s.default.p136(this.entity.getRotation(),s.default.p123(l,f),1-r.default.p62(-this.rotationSharpness*t));this.entity.setRotation(p),this.Jn&&r.default.p69(i)>0&&(this.targetDistance=this.$n),this.targetDistance+=i*this.distanceMovementSpeed,this.targetDistance=r.default.p43(this.targetDistance,this.minDistance,this.maxDistance),o.default.p149(this.ts,this.followTransform.getPosition(),1-r.default.p62(-this.followingSharpness*t));let d=!0;if(this.handleObstructions){const i={value:null},e=o.default.p126(this.entity.getPosition(),this.followTransform.getPosition());this.Qn=n.default.p246(this.app.systems.rigidbody,this.ts,this.obstructionCheckRadius,e,this.Yn,this.targetDistance);for(let t=0;t<this.Qn;t++)this.Yn[t].entity.rigidbody&&!this.ignoredColliders.includes(this.Yn[t].entity)&&(!i.value||this.Yn[t].distance<i.value.distance)&&this.Yn[t].distance>0&&(i.value=this.Yn[t]);i.value&&(d=!1,this.Jn=!0,this.$n=r.default.p41(this.$n,i.value.distance,1-r.default.p62(-this.obstructionSharpness*t)))}d&&(this.Jn=!1,this.$n=r.default.p41(this.$n,this.targetDistance,1-r.default.p62(-this.distanceMovementSharpness*t)));const _=o.default.p126(this.ts,o.default.p120(this.entity.forward,this.$n));o.default.p128(_,o.default.p120(this.entity.right,this.followPointFraming.x)),o.default.p128(_,o.default.p120(this.entity.up,this.followPointFraming.y)),this.entity.setPosition(_)}}i.p304=a,i.default=a,i.p303="ExampleCharacterCamera",pc.registerScript(a,i.p303),(0,c.p236)(a,"followPointFraming",{type:"vec2",default:[0,0]}),(0,c.p236)(a,"followingSharpness",{type:"number",default:1e4}),(0,c.p236)(a,"handleObstructions",{type:"boolean",default:!0}),(0,c.p236)(a,"defaultDistance",{type:"number",default:6}),(0,c.p236)(a,"minDistance",{type:"number",default:0}),(0,c.p236)(a,"maxDistance",{type:"number",default:10}),(0,c.p236)(a,"distanceMovementSpeed",{type:"number",default:5}),(0,c.p236)(a,"distanceMovementSharpness",{type:"number",default:10}),(0,c.p236)(a,"invertX",{type:"boolean",default:!1}),(0,c.p236)(a,"invertY",{type:"boolean",default:!1}),(0,c.p236)(a,"defaultVerticalAngle",{type:"number",min:-90,max:90,default:20}),(0,c.p236)(a,"minVerticalAngle",{type:"number",min:-90,max:90,default:-90}),(0,c.p236)(a,"maxVerticalAngle",{type:"number",min:-90,max:90,default:90}),(0,c.p236)(a,"rotationSpeed",{type:"number",default:1}),(0,c.p236)(a,"rotationSharpness",{type:"number",default:1e4}),(0,c.p236)(a,"rotateWithPhysicsMover",{type:"boolean",default:!1}),(0,c.p236)(a,"obstructionCheckRadius",{type:"number",default:.2}),(0,c.p236)(a,"obstructionLayers",{type:"number",default:-1}),(0,c.p236)(a,"obstructionSharpness",{type:"number",default:1e4}),(0,c.p236)(a,"ignoredColliders",{type:"entity",array:!0})})),define("d34",["require","exports","d19","d27","d4","d3","d7","d9","d10","d8","d29"],(function(t,i,e,n,s,o,r,h,u,c,a){var l,f,p;Object.defineProperty(i,"__esModule",{value:!0}),i.p306=i.p307=i.p308=i.p309=i.p310=void 0,s=__importDefault(s),r=__importDefault(r),h=__importDefault(h),u=__importDefault(u),c=__importDefault(c),a=__importDefault(a),function(t){t[t.Default=0]="Default"}(l||(i.p310=l={})),function(t){t[t.TowardsCamera=0]="TowardsCamera",t[t.TowardsMovement=1]="TowardsMovement"}(f||(i.p309=f={})),function(t){t[t.None=0]="None",t[t.TowardsGravity=1]="TowardsGravity",t[t.TowardsGroundSlopeAndGravity=2]="TowardsGroundSlopeAndGravity"}(p||(i.p308=p={}));class d extends s.default{constructor(){super(...arguments),this.maxStableMoveSpeed=10,this.stableMovementSharpness=15,this.orientationSharpness=10,this.orientationMethod=f.TowardsCamera,this.maxAirMoveSpeed=15,this.airAccelerationSpeed=15,this.drag=.1,this.allowJumpingWhenSliding=!1,this.jumpUpSpeed=10,this.jumpScalableForwardSpeed=10,this.jumpPreGroundingGraceTime=0,this.jumpPostGroundingGraceTime=0,this.bonusOrientationMethod=p.None,this.bonusOrientationSharpness=10,this.crouchedCapsuleHeight=1,this.ss=new Array(8),this.os=new o.p16,this.rs=new o.p16,this.hs=!1,this.us=!1,this.cs=!1,this.ls=r.default.p72,this.fs=0,this.ps=new o.p16,this.ds=!1,this._s=!1}ws(){return this.bs}awake(){this.vs=this.getComponentOrThrow(a.default),this.vs.we=this,this.meshRoot=this.entity,this.ys(l.Default)}ys(t){const i=this.bs;this.gs(i,t),this.bs=t,this.xs(t,i)}xs(t,i){l.Default}gs(t,i){l.Default}Ms(t){const i=h.default.p161(new o.p16(t.Ds,0,t.Ss),1),e=h.default.p172(h.default.p96(u.default.p209(t.As,c.default.forward),this.vs.Vi));0===h.default.p93(e)&&h.default.p172(h.default.p96(u.default.p209(t.As,c.default.up,e),this.vs.Vi));const n=u.default.p210(e,this.vs.Vi);if(this.bs===l.Default){switch(h.default.p145(n,i,this.os),this.orientationMethod){case f.TowardsCamera:h.default.p24(this.rs,e);break;case f.TowardsMovement:h.default.p173(this.os,this.rs)}t.Os&&(this.ls=0,this.hs=!0),t.js?(this.ds=!0,this._s||(this._s=!0,this.vs.oe(this.vs.Xi,this.crouchedCapsuleHeight,.5*this.crouchedCapsuleHeight,!0),this.meshRoot.setLocalScale(1,.5,1))):t.Cs&&(this.ds=!1)}}Ts(t){h.default.p24(this.os,t.qs),h.default.p24(this.rs,t.Ps)}me(t){}qe(t,i){switch(this.bs){case l.Default:{if(h.default.p93(this.rs)>0&&this.orientationSharpness>0){const e=1-r.default.p62(-this.orientationSharpness*i),n=h.default.p172(h.default.p138(this.vs.Hi,this.rs,e));u.default.p210(n,this.vs.Vi,t)}const e=1-r.default.p62(-this.bonusOrientationSharpness*i),n=u.default.p209(t,c.default.up);if(this.bonusOrientationMethod===p.TowardsGravity){const i=h.default.p136(n,h.default.p108(h.default.p173(this.gravity)),e);u.default.p121(u.default.p206(n,i),t)}else if(this.bonusOrientationMethod===p.TowardsGroundSlopeAndGravity)if(this.vs.Xt.Ht){const i=h.default.p127(this.vs.Ii,h.default.p120(n,this.vs.Xi)),s=h.default.p138(this.vs.Vi,this.vs.Xt.Pt,e);u.default.p121(u.default.p206(n,s),t),this.vs.Ii=h.default.p129(i,h.default.p119(u.default.p209(t,c.default.down),this.vs.Xi))}else{const i=h.default.p136(n,h.default.p108(h.default.p173(this.gravity)),e);u.default.p121(u.default.p206(n,i),t)}else{const i=h.default.p138(n,c.default.up,e);u.default.p121(u.default.p206(n,i),t)}break}}}Ee(t,i){if(this.bs===l.Default){if(this.vs.Xt.Ht){const e=h.default.p94(t),n=this.vs.Xt.Pt;h.default.p119(this.vs.Oe(t,n,t),e);const s=h.default.p169(this.os,this.vs.Vi),o=h.default.p119(h.default.p172(h.default.p169(n,s)),h.default.p94(this.os)),u=h.default.p120(o,this.maxStableMoveSpeed);h.default.p149(t,u,1-r.default.p62(-this.stableMovementSharpness*i))}else{if(h.default.p93(this.os)>0){const e=h.default.p120(this.os,this.airAccelerationSpeed*i),n=h.default.p97(t,this.vs.Vi);if(h.default.p94(n)<this.maxAirMoveSpeed){const t=h.default.p161(h.default.p129(n,e),this.maxAirMoveSpeed);h.default.p126(t,n,e)}else h.default.p159(n,e)>0&&h.default.p96(e,h.default.p173(n));if(this.vs.Xt.Vt&&h.default.p159(h.default.p129(t,e),e)>0){const t=h.default.p172(h.default.p168(h.default.p169(this.vs.Vi,this.vs.Xt.Pt),this.vs.Vi));h.default.p96(e,t)}h.default.p128(t,e)}h.default.p128(t,h.default.p120(this.gravity,i)),h.default.p119(t,1/(1+this.drag*i))}if(this.cs=!1,this.ls+=i,this.hs&&!this.us&&((this.allowJumpingWhenSliding?this.vs.Xt.Vt:this.vs.Xt.Ht)||this.fs<=this.jumpPostGroundingGraceTime)){let i=this.vs.Vi;this.vs.Xt.Vt&&!this.vs.Xt.Ht&&(i=this.vs.Xt.Pt),this.vs.Je(),h.default.p128(t,h.default.p125(h.default.p120(i,this.jumpUpSpeed),h.default.p100(t,this.vs.Vi))),h.default.p128(t,h.default.p120(this.os,this.jumpScalableForwardSpeed)),this.hs=!1,this.us=!0,this.cs=!0}h.default.p93(this.ps)>0&&(h.default.p128(t,this.ps),h.default.p24(this.ps,c.default.zero))}}Ve(t){if(this.bs===l.Default&&(this.hs&&this.ls>this.jumpPreGroundingGraceTime&&(this.hs=!1),(this.allowJumpingWhenSliding?this.vs.Xt.Vt:this.vs.Xt.Ht)?(this.cs||(this.us=!1),this.fs=0):this.fs+=t,this._s&&!this.ds)){this.vs.oe(this.vs.Xi,2,1,!1);const t=this.vs.Sn(this.vs.Ii,this.vs.Yi,this.ss,-.05);let i=0;for(let e=0;e<t;e++)this.ss[e]!==this.vs.Xt.Et&&this.ss[e].rigidbody&&i++;i>0?this.vs.oe(this.vs.Xi,this.crouchedCapsuleHeight,.5*this.crouchedCapsuleHeight,!1):(this.vs.oe(this.vs.Xi,2,1,!0),this.meshRoot.setLocalScale(1,1,1),this._s=!1)}}je(t){this.vs.Xt.Ht&&!this.vs.ti.Ht?this.ks():!this.vs.Xt.Ht&&this.vs.ti.Ht&&this.Rs()}vn(t){return!0}fn(t){return 0==this.ignoredColliders.length||!this.ignoredColliders.includes(t)}Le(t,i,e,n){}Ye(t,i,e,n){}addVelocity(t){this.bs===l.Default&&h.default.p128(this.ps,t)}wn(t,i,e,n,s,o){}ks(){}Rs(){}Ie(t){}}i.p307=d,i.default=d,i.p306="ExampleCharacterController",pc.registerScript(d,i.p306),(0,e.p236)(d,"maxStableMoveSpeed",{type:"number",default:10}),(0,e.p236)(d,"stableMovementSharpness",{type:"number",default:15}),(0,e.p236)(d,"orientationSharpness",{type:"number",default:10}),(0,e.p236)(d,"orientationMethod",{type:"number",enum:(0,n.p269)(f),default:f.TowardsCamera}),(0,e.p236)(d,"maxAirMoveSpeed",{type:"number",default:15}),(0,e.p236)(d,"airAccelerationSpeed",{type:"number",default:15}),(0,e.p236)(d,"drag",{type:"number",default:.1}),(0,e.p236)(d,"allowJumpingWhenSliding",{type:"boolean",default:!1}),(0,e.p236)(d,"jumpUpSpeed",{type:"number",default:10}),(0,e.p236)(d,"jumpScalableForwardSpeed",{type:"number",default:10}),(0,e.p236)(d,"jumpPreGroundingGraceTime",{type:"number",default:0}),(0,e.p236)(d,"jumpPostGroundingGraceTime",{type:"number",default:0}),(0,e.p236)(d,"ignoredColliders",{type:"entity",array:!0}),(0,e.p236)(d,"bonusOrientationMethod",{type:"number",enum:(0,n.p269)(p),default:p.None}),(0,e.p236)(d,"bonusOrientationSharpness",{type:"number",default:10}),(0,e.p236)(d,"gravity",{type:"vec3",default:[0,-30,0]}),(0,e.p236)(d,"meshRoot",{type:"entity"}),(0,e.p236)(d,"cameraFollowPoint",{type:"entity"}),(0,e.p236)(d,"crouchedCapsuleHeight",{type:"number",default:1})})),define("d35",["require","exports","d4","d7","d3","d22","d9","d10","d19","d8","D30"],(function(t,i,e,n,s,o,r,h,u,c,a){Object.defineProperty(i,"__esModule",{value:!0}),i.p311=i.p312=void 0,e=__importDefault(e),n=__importDefault(n),o=__importDefault(o),r=__importDefault(r),h=__importDefault(h),c=__importDefault(c),a=__importDefault(a);class l extends e.default{constructor(){super(...arguments),this.parentForMoving=!1,this.translationPeriod=10,this.translationSpeed=1,this.rotateAroundLocalAxis=!1,this.rotSpeed=10,this.oscillationPeriod=10,this.oscillationSpeed=10,this.Es=0,this.Fs=new s.p16,this.Is=new s.p18}start(){this.un=this.getComponent(o.default)||this.getComponentOrThrow(a.default),this.un.X=this;const t=this.parentForMoving?this.un.entity.parent:this.un.entity;r.default.p24(this.Fs,t.getPosition()),h.default.p24(this.Is,t.getRotation())}Vs(){return this.un}Hs(t){this.Es=t}tt(t,i,e){this.Es+=e;const s=n.default.p55(this.Es*this.translationSpeed)*this.translationPeriod,o=n.default.p55(this.Es*this.oscillationSpeed)*this.oscillationPeriod,u=this.Es*this.rotSpeed;if(this.parentForMoving){const t=this.un.entity.parent.getPosition(),i=this.un.entity.parent.getRotation();r.default.p24(this.Fs,t),h.default.p24(this.Is,i),r.default.p172(h.default.p209(i,this.translationAxis,f)),r.default.p172(h.default.p209(i,this.oscillationAxis,p))}else r.default.p173(this.translationAxis,f),r.default.p173(this.oscillationAxis,p);r.default.p127(this.Fs,r.default.p120(f,s,t)),h.default.p122(h.default.p181(p.x*o,p.y*o,p.z*o,d),this.Is),h.default.p181(this.rotationAxis.x*u,this.rotationAxis.y*u,this.rotationAxis.z*u,i),this.rotateAroundLocalAxis?h.default.p121(d,i):h.default.p122(i,d)}}i.p312=l;const f=new s.p16,p=new s.p16,d=new s.p18;i.default=l,i.p311="ExampleMovingPlatform",pc.registerScript(l,i.p311),(0,u.p236)(l,"parentForMoving",{type:"boolean",default:!1}),(0,u.p236)(l,"translationAxis",{type:"vec3",default:[c.default.right.x,c.default.right.y,c.default.right.z]}),(0,u.p236)(l,"translationPeriod",{type:"number",default:10}),(0,u.p236)(l,"translationSpeed",{type:"number",default:1}),(0,u.p236)(l,"rotateAroundLocalAxis",{type:"boolean",default:!1}),(0,u.p236)(l,"rotationAxis",{type:"vec3",default:[c.default.up.x,c.default.up.y,c.default.up.z]}),(0,u.p236)(l,"rotSpeed",{type:"number",default:10}),(0,u.p236)(l,"oscillationAxis",{type:"vec3",default:[0,0,0]}),(0,u.p236)(l,"oscillationPeriod",{type:"number",default:10}),(0,u.p236)(l,"oscillationSpeed",{type:"number",default:10})})),define("d36",["require","exports","d19","d4","d10","d3","d9","D30","D23","d22","d33","d34"],(function(t,i,e,n,s,o,r,h,u,c,a,l){Object.defineProperty(i,"__esModule",{value:!0}),i.p313=i.p314=void 0,n=__importStar(n),s=__importDefault(s),r=__importDefault(r),h=__importDefault(h),u=__importDefault(u),c=__importDefault(c),a=__importDefault(a),l=__importDefault(l);class f extends n.default{constructor(){super(...arguments),this.lockCursor=!0,this.Ns=0,this.Bs=0,this.zs=0,this.Gs=!1,this.Us={Ss:0,Ds:0,As:new o.p18,Os:!1,js:!1,Cs:!1}}onEnable(){const t=this.app;t.mouse.on(pc.EVENT_MOUSEMOVE,this.Ws,this),t.mouse.on(pc.EVENT_MOUSEUP,this.Ls,this),t.mouse.on(pc.EVENT_MOUSEDOWN,this.Js,this),t.mouse.on(pc.EVENT_MOUSEWHEEL,this.$s,this)}onDisable(){const t=this.app;t.mouse.off(pc.EVENT_MOUSEMOVE,this.Ws,this),t.mouse.off(pc.EVENT_MOUSEUP,this.Ls,this),t.mouse.off(pc.EVENT_MOUSEDOWN,this.Js,this),t.mouse.off(pc.EVENT_MOUSEWHEEL,this.$s,this)}onDestroy(){this.onDisable()}start(){this.Zs=(0,n.p21)(this.characterEntity,l.default),this.Ks=(0,n.p21)(this.cameraEntity,a.default),this.Ks.es(this.Zs.cameraFollowPoint),this.Ks.ignoredColliders.push(this.Zs.entity)}update(t){this.Qs(t)}lateUpdate(t){const i=this.Zs.vs.Gi;if(this.Ks.rotateWithPhysicsMover&&i){const t=(0,n.p21)(i.entity,c.default)||(0,n.p20)(i.entity,h.default);t&&(u.default.Cn().interpolate?s.default.p208(t.j,this.Ks.planarDirection):s.default.p208(t.I(),this.Ks.planarDirection),r.default.p172(r.default.p96(this.Ks.planarDirection,this.Zs.vs.Vi)))}this.Ys(t)}Ws(t){this.lockCursor&&!pc.Mouse.isPointerLocked()||(this.Ns=t.dy,this.Bs=-t.dx,this.zs=t.wheelDelta)}Ls(t){t.button===pc.MOUSEBUTTON_RIGHT&&(this.Gs=!0)}Js(t){t.button===pc.MOUSEBUTTON_RIGHT&&(this.Gs=!1),this.lockCursor&&this.app.mouse.enablePointerLock()}$s(t){this.Ws(t)}Ys(t){let i=this.Ns,e=this.Bs;if(this.useMobileControl){const t=touchJoypad.sticks[this.rotateJoystickId];t&&(i=t.y,e=-t.x)}const n=-this.zs;this.Ns=0,this.Bs=0,this.zs=0;const s=new o.p16(e,i,0);this.Ks.ns(t,n,s),this.Gs&&(this.Gs=!1,this.Ks.targetDistance=0==this.Ks.targetDistance?this.Ks.defaultDistance:0)}Qs(t){if(this.useMobileControl){const t=touchJoypad.sticks[this.moveJoystickId];t&&(this.Us.Ss=t.y,this.Us.Ds=-t.x)}else this.Us.Ss=0,this.Us.Ds=0;this.app.keyboard.isPressed(pc.KEY_W)&&(this.Us.Ss+=1),this.app.keyboard.isPressed(pc.KEY_S)&&(this.Us.Ss-=1),this.app.keyboard.isPressed(pc.KEY_A)&&(this.Us.Ds+=1),this.app.keyboard.isPressed(pc.KEY_D)&&(this.Us.Ds-=1),s.default.p24(this.Us.As,this.Ks.entity.getRotation()),this.Us.Os=this.app.keyboard.isPressed(pc.KEY_SPACE)||touchJoypad.buttons.isPressed(this.jumpButtonId),this.Us.js=this.app.keyboard.isPressed(pc.KEY_C)||touchJoypad.buttons.isPressed(this.crouchButtonId),this.Us.Cs=!this.Us.js,this.Zs.Ms(this.Us)}}i.p314=f,i.default=f,i.p313="ExamplePlayer",pc.registerScript(f,i.p313),(0,e.p236)(f,"cameraEntity",{type:"entity"}),(0,e.p236)(f,"characterEntity",{type:"entity"}),(0,e.p236)(f,"useMobileControl",{type:"boolean"}),(0,e.p236)(f,"moveJoystickId",{type:"string"}),(0,e.p236)(f,"rotateJoystickId",{type:"string"}),(0,e.p236)(f,"jumpButtonId",{type:"string"}),(0,e.p236)(f,"crouchButtonId",{type:"string"})})),define("d37",["require","exports","d19","d27","d4","d3","d34"],(function(t,i,e,n,s,o,r){Object.defineProperty(i,"__esModule",{value:!0}),i.p315=i.p316=void 0,s=__importStar(s),r=__importStar(r);class h extends s.default{onEnable(){var t,i;null===(t=this.entity.collision)||void 0===t||t.on(o.p3.EVENT_TRIGGERENTER,this.Xs,this),null===(i=this.entity.collision)||void 0===i||i.on(o.p3.EVENT_TRIGGERLEAVE,this.io,this)}onDisable(){var t,i;null===(t=this.entity.collision)||void 0===t||t.off(o.p3.EVENT_TRIGGERENTER,this.Xs,this),null===(i=this.entity.collision)||void 0===i||i.off(o.p3.EVENT_TRIGGERLEAVE,this.io,this)}Xs(t){const i=(0,s.p21)(t,r.default);i&&(this.eo=i.bonusOrientationMethod,i.bonusOrientationMethod=this.bonusOrientationMethod)}io(t){const i=(0,s.p21)(t,r.default);i&&(i.bonusOrientationMethod=this.eo)}}i.p316=h,i.p315="ChangeBonusOrientationMethodByZone",i.default=h,pc.registerScript(h,i.p315),(0,e.p236)(h,"bonusOrientationMethod",{type:"number",enum:(0,n.p269)(r.p308)})})),define("d38",["require","exports","d19","d4","d36"],(function(t,i,e,n,s){var o;Object.defineProperty(i,"__esModule",{value:!0}),i.p317=i.p318=i.p319=void 0,n=__importDefault(n),function(t){t[t.PC=0]="PC",t[t.Mobile=1]="Mobile"}(o||(i.p319=o={}));class r extends n.default{awake(){const t=this.playerEntity.script[s.p313];this.mobileControls.enabled=t.useMobileControl}update(t){const i=this.playerEntity.script[s.p313];touchJoypad.buttons.wasPressed(this.switchButtonId)&&(i.useMobileControl=!i.useMobileControl,this.mobileControls.enabled=i.useMobileControl)}}i.p318=r,i.p317="ControlTypeSwitcher",pc.registerScript(r,i.p317),(0,e.p236)(r,"switchButtonId",{type:"string"}),(0,e.p236)(r,"playerEntity",{type:"entity"}),(0,e.p236)(r,"mobileControls",{type:"entity"})})),define("d39",["require","exports","d19","d4","d10","d3","d8","d9"],(function(t,i,e,n,s,o,r,h){Object.defineProperty(i,"__esModule",{value:!0}),i.p320=i.p321=void 0,n=__importDefault(n),s=__importDefault(s),r=__importDefault(r),h=__importDefault(h);class u extends n.default{constructor(){super(...arguments),this.parentForMoving=!1,this.timeout=10,this.no=0,this.Fs=new o.p16,this.Is=new o.p18}awake(){const t=this.parentForMoving?this.entity.parent:this.entity;h.default.p24(this.Fs,t.getPosition()),s.default.p24(this.Is,t.getRotation())}so(t){if(this.parentForMoving){const t=this.entity.parent.getPosition(),i=this.entity.parent.getRotation();let e=!1;h.default.p132(this.Fs,t)&&(h.default.p24(this.Fs,t),e=!0),s.default.p132(this.Is,i)&&(s.default.p24(this.Is,i),e=!0),e&&this.respawn()}}respawn(){const t=this.entity.rigidbody;t&&(t.linearVelocity=r.default.zero,t.angularVelocity=r.default.zero,t.teleport(this.Fs,this.Is))}update(t){this.so(t),this.no+=t,this.no>this.timeout&&(this.no=0,this.respawn())}}i.p321=u,i.default=u,i.p320="DynamicRigidBodyRespowner",pc.registerScript(u,i.p320),(0,e.p236)(u,"parentForMoving",{type:"boolean",default:!1}),(0,e.p236)(u,"timeout",{type:"number",min:.5,default:10})})),define("d40",["require","exports","d4","d3","d8","d9"],(function(t,i,e,n,s,o){Object.defineProperty(i,"__esModule",{value:!0}),i.p322=i.p323=void 0,e=__importDefault(e),s=__importDefault(s),o=__importDefault(o);const r={Ps:new n.p16,qs:new n.p16};class h extends e.default{constructor(){super(...arguments),this.movementPeriod=1,this.characters=new Array,this.no=0}update(t){this.no+=t,o.default.p118(Math.sin(this.no*this.movementPeriod),s.default.back,r.qs),o.default.p172(o.default.p138(s.default.forward,s.default.back,r.qs.z,r.Ps));for(const t of this.characters)t.Ts(r)}}i.p323=h,i.p322="ExampleAIController",pc.registerScript(h,i.p322)})),define("d41",["require","exports","d19","d4"],(function(t,i,e,n){Object.defineProperty(i,"__esModule",{value:!0}),i.p324=i.p325=void 0,n=__importDefault(n);class s extends n.default{onEnable(){var t;null===(t=this.fullScreenButton.button)||void 0===t||t.on("click",this.oo,this)}onDisable(){var t;null===(t=this.fullScreenButton.button)||void 0===t||t.off("click",this.oo,this)}oo(){document.fullscreenElement?this.ro():this.ho()}ho(){try{const t=document.documentElement;t.requestFullscreen?t.requestFullscreen().catch((t=>{console.log(t)})):t.mozRequestFullScreen?t.mozRequestFullScreen().catch((t=>{console.log(t)})):t.webkitRequestFullscreen?t.webkitRequestFullscreen().catch((t=>{console.log(t)})):t.msRequestFullscreen&&t.msRequestFullscreen().catch((t=>{console.log(t)}))}catch(t){console.log(t)}}ro(){try{const t=document;t.cancelFullScreen?t.cancelFullScreen().catch((t=>{console.log(t)})):t.mozCancelFullScreen?t.mozCancelFullScreen().catch((t=>{console.log(t)})):t.webkitCancelFullScreen?t.webkitCancelFullScreen().catch((t=>{console.log(t)})):t.msCancelFullScreen&&t.msCancelFullScreen().catch((t=>{console.log(t)}))}catch(t){console.log(t)}}}i.p325=s,i.p324="FullScreen",pc.registerScript(s,i.p324),(0,e.p236)(s,"fullScreenButton",{type:"entity"})})),define("d42",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p326=void 0;class e{constructor(){this.uo=[]}call(...t){for(let i in this.uo)this.uo[i]&&this.uo[i][0].call(this.uo[i][1],...t)}add(t,i){this.uo.push([t,i])}remove(t){for(let i in this.uo)if(this.uo[i][0]===t){delete this.uo[i];break}}}i.p326=e,i.default=e})),define("d43",["require","exports","d3","d19","d42","d4","d34"],(function(t,i,e,n,s,o,r){Object.defineProperty(i,"__esModule",{value:!0}),i.p327=i.p328=void 0,s=__importDefault(s),o=__importStar(o),r=__importDefault(r);class h extends o.default{constructor(){super(...arguments),this.onCharacterTeleport=new s.default,this.isBeingTeleportedTo=!1}onEnable(){var t;null===(t=this.entity.collision)||void 0===t||t.on(e.p3.EVENT_TRIGGERENTER,this.Xs,this)}onDisable(){var t;null===(t=this.entity.collision)||void 0===t||t.off(e.p3.EVENT_TRIGGERENTER,this.Xs,this)}Xs(t){if(!this.isBeingTeleportedTo){const i=(0,o.p21)(t,r.default);if(i){i.vs.J(this.teleportTo.getPosition(),this.teleportTo.getRotation()),this.onCharacterTeleport.call(i);const t=(0,o.p21)(this.teleportTo,h);t&&(t.isBeingTeleportedTo=!0)}}this.isBeingTeleportedTo=!1}}i.p328=h,i.default=h,i.p327="Teleporter",pc.registerScript(h,i.p327),(0,n.p236)(h,"teleportTo",{type:"entity"})})),define("d44",["require","exports","d19","d4","d10","d3","d8","d9","D30","d22","d43"],(function(t,i,e,n,s,o,r,h,u,c,a){Object.defineProperty(i,"__esModule",{value:!0}),i.p329=void 0,n=__importStar(n),s=__importDefault(s),r=__importDefault(r),h=__importDefault(h),u=__importDefault(u),c=__importDefault(c),a=__importDefault(a);class l extends n.default{constructor(){super(...arguments),this.gravityStrength=10,this.orbitAxis=h.default.p23(r.default.forward),this.orbitSpeed=10,this.co=new Set,this.ao=new o.p16,this.lo=new o.p18}onChangeAttribute(t,i,e){switch(t){case"playgroundTeleportingZone":this.fo();break;case"planetTeleportingZone":this.po();break;case"planetSphere":this.do()}}do(){this._o=(0,n.p21)(this.planetSphere,c.default)||(0,n.p21)(this.planetSphere,u.default),this._o.X=this,s.default.p24(this.lo,this.planetSphere.getRotation())}fo(){var t;null===(t=this.mo)||void 0===t||t.onCharacterTeleport.remove(this.wo),this.mo=(0,n.p21)(this.playgroundTeleportingZone,a.default),this.mo.onCharacterTeleport.remove(this.wo),this.mo.onCharacterTeleport.add(this.wo,this)}po(){var t;null===(t=this.bo)||void 0===t||t.onCharacterTeleport.remove(this.vo),this.bo=(0,n.p21)(this.planetTeleportingZone,a.default),this.bo.onCharacterTeleport.remove(this.vo),this.bo.onCharacterTeleport.add(this.vo,this)}start(){this.fo(),this.po(),this.do()}tt(t,i,e){h.default.p120(this.orbitAxis,this.orbitSpeed*e,t),s.default.p122(s.default.p180(t,i),this.lo),h.default.p24(t,this.planetSphere.getPosition()),s.default.p24(this.lo,i);for(const t of this.co)h.default.p119(h.default.p172(h.default.p126(this.planetSphere.getPosition(),t.entity.getPosition(),t.gravity)),this.gravityStrength)}wo(t){h.default.p24(this.ao,t.gravity),this.co.add(t)}vo(t){h.default.p24(t.gravity,this.ao),this.co.delete(t)}}i.p329=l,i.default=l,pc.registerScript(l,"PlanetManager"),(0,e.p236)(l,"planetSphere",{type:"entity"}),(0,e.p236)(l,"gravityStrength",{type:"number",default:10}),(0,e.p236)(l,"orbitAxis",{type:"vec3",default:[0,0,1]}),(0,e.p236)(l,"orbitSpeed",{type:"number",default:10}),(0,e.p236)(l,"playgroundTeleportingZone",{type:"entity"}),(0,e.p236)(l,"planetTeleportingZone",{type:"entity"})})),define("d45",["require","exports","d19","d4","d9","d34"],(function(t,i,e,n,s,o){Object.defineProperty(i,"__esModule",{value:!0}),i.p330=i.p331=void 0,n=__importStar(n),s=__importDefault(s),o=__importDefault(o);class r extends n.default{constructor(){super(...arguments),this.force=10,this.lookToCharacter=!1,this.yo=!1}onEnable(){var t,i;null===(t=this.entity.collision)||void 0===t||t.on(pc.CollisionComponent.EVENT_TRIGGERENTER,this.Xs,this),null===(i=this.entity.collision)||void 0===i||i.on(pc.CollisionComponent.EVENT_TRIGGERLEAVE,this.io,this)}onDisable(){var t,i;null===(t=this.entity.collision)||void 0===t||t.off(pc.CollisionComponent.EVENT_TRIGGERENTER,this.Xs,this),null===(i=this.entity.collision)||void 0===i||i.off(pc.CollisionComponent.EVENT_TRIGGERLEAVE,this.io,this)}Xs(t){(0,n.p21)(t,o.default)&&(this.yo=!0,this.Zs=t)}io(t){(0,n.p21)(t,o.default)&&(this.yo=!1,this.Zs=void 0)}update(){this.lookToCharacter&&this.Zs&&this.entity.lookAt(this.Zs.collision.getShapePosition());const t=this.app.keyboard.wasPressed(pc.KEY_ENTER);if(this.yo&&this.toLaunch&&t){const t=this.toLaunch.clone();this.entity.addChild(t),t.rigidbody.teleport(this.entity.getPosition(),this.entity.getRotation()),t.rigidbody.linearVelocity=pc.Vec3.ZERO,t.rigidbody.angularVelocity=pc.Vec3.ZERO,t.rigidbody.applyForce(s.default.p119(this.entity.forward,this.force)),setTimeout((()=>{t.destroy()}),8e3)}}}i.p331=r,i.p330="PrefabLauncher",pc.registerScript(r,i.p330),(0,e.p236)(r,"toLaunch",{type:"entity"}),(0,e.p236)(r,"force",{type:"number",default:10}),(0,e.p236)(r,"lookToCharacter",{type:"boolean",default:!1})})),define("d46",["require","exports","d2"],(function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.p332=i.p333=void 0;class n extends e.p0{initialize(){const t=this.heightMap.resource.getSource(),i=this.createTerrainFromHeightMap(t,this.subdivisions),e=this.createTerrainFromHeightMap(t,this.subdivisions/2);this.entity.addComponent("render",{meshInstances:[new pc.MeshInstance(i,this.material.resource)]}),this.entity.addComponent("collision",{type:"mesh"});const n=new pc.GraphNode,s=new pc.MeshInstance(e,this.material.resource,n),o=new pc.Model;o.graph=n,o.meshInstances.push(s),this.entity.collision.model=o,this.entity.addComponent("rigidbody",{friction:.5,type:"static"})}createTerrainVertexData(t){const i=[],e=[],n=[];let s,o;for(s=0;s<=t.subdivisions;s++)for(o=0;o<=t.subdivisions;o++){var r=new pc.Vec3(o*t.width/t.subdivisions-t.width/2,0,(t.subdivisions-s)*t.height/t.subdivisions-t.height/2),h=4*(((r.x+t.width/2)/t.width*(t.bufferWidth-1)|0)+((1-(r.z+t.height/2)/t.height)*(t.bufferHeight-1)|0)*t.bufferWidth),u=t.buffer[h]/255*.3+t.buffer[h+1]/255*.59+t.buffer[h+2]/255*.11;r.y=t.minHeight+(t.maxHeight-t.minHeight)*u,i.push(r.x,r.y,r.z),e.push(o/t.subdivisions,1-s/t.subdivisions)}for(s=0;s<t.subdivisions;s++)for(o=0;o<t.subdivisions;o++)n.push(o+s*(t.subdivisions+1)),n.push(o+1+s*(t.subdivisions+1)),n.push(o+1+(s+1)*(t.subdivisions+1)),n.push(o+s*(t.subdivisions+1)),n.push(o+1+(s+1)*(t.subdivisions+1)),n.push(o+(s+1)*(t.subdivisions+1));return{indices:n,positions:i,normals:pc.calculateNormals(i,n),uvs:e}}createTerrainFromHeightMap(t,i){const e=document.createElement("canvas"),n=e.getContext("2d"),s=t.width,o=t.height;e.width=s,e.height=o,n.drawImage(t,0,0);const r=n.getImageData(0,0,s,o).data,h=this.createTerrainVertexData({width:this.width,height:this.depth,subdivisions:i,minHeight:this.minHeight,maxHeight:this.maxHeight,buffer:r,bufferWidth:s,bufferHeight:o}),u=new pc.Mesh(this.app.graphicsDevice);return u.setPositions(h.positions),u.setNormals(h.normals),u.setUvs(0,h.uvs),u.setIndices(h.indices),u.update(),u}}i.p333=n,i.default=n,i.p332="Terrain",pc.registerScript(n,i.p332),n.attributes.add("heightMap",{type:"asset",assetType:"texture"}),n.attributes.add("minHeight",{type:"number",default:0}),n.attributes.add("maxHeight",{type:"number",default:10}),n.attributes.add("width",{type:"number",default:100}),n.attributes.add("depth",{type:"number",default:100}),n.attributes.add("subdivisions",{type:"number",default:250}),n.attributes.add("material",{type:"asset",assetType:"material"})})),window,"undefined"!=typeof document&&(function(t,i){function e(t){return document.createElement(t)}function n(t,i){for(var e in i)try{t.style[e]=i[e]}catch(t){}return t}function s(i){return null==i?String(i):"object"==typeof i||"function"==typeof i?(i instanceof t.NodeList?"nodelist":i instanceof t.HTMLCollection&&"htmlcollection")||Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase():typeof i}function o(t,i){if("array"!==s(i))return-1;if(i.indexOf)return i.indexOf(t);for(var e=0,n=i.length;e<n;e++)if(i[e]===t)return e;return-1}function r(){var t=arguments;for(var i in t[1])if(t[1].hasOwnProperty(i))switch(s(t[1][i])){case"object":"object"===s(t[0][i])?r(t[0][i],t[1][i]):t[0][i]=r({},t[1][i]);break;case"array":t[0][i]=t[1][i].slice(0);break;default:t[0][i]=t[1][i]}return t.length>2?r.apply(null,[t[0]].concat(Array.prototype.slice.call(t,2))):t[0]}function h(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function u(t,i,e,n){t.addEventListener?t[n?"removeEventListener":"addEventListener"](i,e,!1):t.attachEvent&&t[n?"detachEvent":"attachEvent"]("on"+i,e)}var c;!function(){var i=t.performance;if(i&&(i.now||i.webkitNow)){var e=i.now?"now":"webkitNow";c=i[e].bind(i)}else c=function(){return+new Date}}();var a=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,l=t.requestAnimationFrame;!function(){for(var i=["moz","webkit","o"],e=0,n=0,s=i.length;n<s&&!a;++n)a=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"],l=a&&t[i[n]+"RequestAnimationFrame"];a||(l=function(i){var n=c(),s=Math.max(0,16-(n-e));return e=n+s,t.setTimeout((function(){i(n+s)}),s)},a=function(t){clearTimeout(t)})}();var f="string"===s(document.createElement("div").textContent)?"textContent":"innerText";function p(t,i){"object"===s(t)&&void 0===t.nodeType&&(i=t,t=document.body),t||(t=document.body);var m,w,b,v,y,g,x,M,D,S=this,A=r({},p.defaults,i||{}),O={},j=[],C=100,T=[],q=A.threshold,P=0,k=c()-q,R=[],E=[],F="fps"===A.show;function I(t,i,e,n){return w[0|t][Math.round(Math.min((i-e)/(n-e)*C,C))]}function V(){O.legend.fps!==F&&(O.legend.fps=F,O.legend[f]=F?"FPS":"ms"),x=F?S.fps:S.duration,O.count[f]=x>999?"999+":x.toFixed(x>99?0:A.decimals)}function H(){if(b=c(),k<b-A.threshold&&(S.fps-=S.fps/Math.max(1,60*A.smoothing/A.interval),S.duration=1e3/S.fps),function(){for(M=A.history;M--;)R[M]=0===M?S.fps:R[M-1],E[M]=0===M?S.duration:E[M-1]}(),V(),A.heat){if(T.length)for(M=T.length;M--;)T[M].el.style[m[T[M].name].heatOn]=F?I(m[T[M].name].heatmap,S.fps,0,A.maxFps):I(m[T[M].name].heatmap,S.duration,A.threshold,0);if(O.graph&&m.column.heatOn)for(M=j.length;M--;)j[M].style[m.column.heatOn]=F?I(m.column.heatmap,R[M],0,A.maxFps):I(m.column.heatmap,E[M],A.threshold,0)}if(O.graph)for(D=0;D<A.history;D++)j[D].style.height=(F?R[D]?Math.round(g/A.maxFps*Math.min(R[D],A.maxFps)):0:E[D]?Math.round(g/A.threshold*Math.min(E[D],A.threshold)):0)+"px"}function N(){A.interval<20?(v=l(N),H()):(v=setTimeout(N,A.interval),y=l(H))}function B(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),S.toggle()}function z(){A.toggleOn&&u(O.container,A.toggleOn,B,1),t.removeChild(O.container)}function G(){for(var i in O.container&&z(),function(){if(m=p.theme[A.theme],!(w=m.compiledHeatmaps||[]).length&&m.heatmaps.length){for(D=0;D<m.heatmaps.length;D++)for(w[D]=[],M=0;M<=C;M++)w[D][M]=(t=.33/C*M,i=m.heatmaps[D].saturation,n=void 0,s=void 0,o=void 0,u=void 0,c=void 0,a=void 0,0==(r=(e=m.heatmaps[D].lightness)<=.5?e*(1+i):e+i-e*i)?"#000":(a=r*((r-(u=2*e-r))/r)*((t*=6)-(c=Math.floor(t))),0===c||6===c?(n=r,s=u+a,o=u):1===c?(n=r-a,s=r,o=u):2===c?(n=u,s=r,o=u+a):3===c?(n=u,s=r-a,o=r):4===c?(n=u+a,s=u,o=r):(n=r,s=u,o=r-a),"#"+h(n)+h(s)+h(o)));m.compiledHeatmaps=w}var t,i,e,n,s,o,r,u,c,a}(),O.container=n(e("div"),m.container),O.count=O.container.appendChild(n(e("div"),m.count)),O.legend=O.container.appendChild(n(e("div"),m.legend)),O.graph=A.graph?O.container.appendChild(n(e("div"),m.graph)):0,T.length=0,O)O[i]&&m[i].heatOn&&T.push({name:i,el:O[i]});if(j.length=0,O.graph)for(O.graph.style.width=A.history*m.column.width+(A.history-1)*m.column.spacing+"px",M=0;M<A.history;M++)j[M]=O.graph.appendChild(n(e("div"),m.column)),j[M].style.position="absolute",j[M].style.bottom=0,j[M].style.right=M*m.column.width+M*m.column.spacing+"px",j[M].style.width=m.column.width+"px",j[M].style.height="0px";U(),V(),t.appendChild(O.container),O.graph&&(g=O.graph.clientHeight),A.toggleOn&&("click"===A.toggleOn&&(O.container.style.cursor="pointer"),u(O.container,A.toggleOn,B))}function U(){n(O.container,A)}S.options=A,S.fps=0,S.duration=0,S.isPaused=0,S.tickStart=function(){P=c()},S.tick=function(){b=c(),q+=(b-k-q)/A.smoothing,S.fps=1e3/q,S.duration=P<k?q:b-P,k=b},S.pause=function(){return v&&(S.isPaused=1,clearTimeout(v),a(v),a(y),v=y=0),S},S.resume=function(){return v||(S.isPaused=0,N()),S},S.set=function(t,i){return A[t]=i,F="fps"===A.show,-1!==o(t,d)&&G(),-1!==o(t,_)&&U(),S},S.showDuration=function(){return S.set("show","ms"),S},S.showFps=function(){return S.set("show","fps"),S},S.toggle=function(){return S.set("show",F?"ms":"fps"),S},S.hide=function(){return S.pause(),O.container.style.display="none",S},S.show=function(){return S.resume(),O.container.style.display="block",S},S.destroy=function(){S.pause(),z(),S.tick=S.tickStart=function(){}},G(),N()}p.extend=r,window.FPSMeter=p,p.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var d=["toggleOn","theme","heat","graph","history"],_=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t,i,e){i.theme={};var n=i.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};i.theme.dark=i.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),i.theme.light=i.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),i.theme.colorful=i.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),i.theme.transparent=i.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(0,FPSMeter)),define("d47",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p334=void 0,i.p334=window.FPSMeter})),define("d48",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0})})),define("d49",["require","exports"],(function(t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.p335=i.p336=void 0,i.p336=function(t){return t._controller._states},i.p335=function(t,i){return i&&("number"!=typeof i.asset||(i=t.assets.get(i.asset)))?i.resource:null}})),define("d50",["require","exports"],(function(t,i){function e(t){return t&&"[object Function]"==={}.toString.call(t)}function n(t){return Array.isArray(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.p233=i.p234=i.p232=i.p235=void 0,i.p235=new Proxy({},{get:(t,i)=>i}),i.p232=e,i.p234=function(t){return e(t)?t(i.p235):t},i.p233=n,i.default=n})),define("d51",["require","exports","d8","d7","d9","d3"],(function(t,i,e,n,s,o){function r(t,i=new o.p16){return(0,s.p25)(i,t.x,t.y,-t.z)}function h(t,i,e,n=new o.p16){return e<=0?(0,s.p24)(n,t):e>=1?(0,s.p24)(n,i):(0,s.p41)(t,i,e,n)}function u(t,i,n,r=new o.p16){return n<=0?(0,s.p25)(r,0,0,0):(0,s.p133)(i,e.default.up)?(0,s.p119)((0,s.p120)(e.default.up,t.y,r),n):(0,s.p119)((0,s.p100)(t,i,r),n)}function c(t,i,n,r=new o.p16){if(n<=0)return(0,s.p25)(r,0,0,0);if((0,s.p133)(i,e.default.up))return(0,s.p25)(r,t.x*n,0,t.z*n);const h=(0,s.p23)(t),u=(0,s.p23)(i);return(0,s.p107)(u,h),(0,s.p119)((0,s.p100)(t,h,r),n)}Object.defineProperty(i,"__esModule",{value:!0}),i.p337=i.p338=i.p339=i.p340=i.p341=i.p342=i.p203=i.p343=void 0,e=__importDefault(e),n=__importDefault(n),s=__importStar(s),i.p343=r,i.p203=h,i.p342=u,i.p341=c;const a=new o.p16;function l(t,i,e,n,r=new o.p16){const h=(0,s.p159)((0,s.p126)(n,t,a),e),u=(0,s.p159)(i,e);if(0===u)return(0,s.p25)(r,0,0,0);const c=h/u;return(0,s.p129)(t,(0,s.p119)((0,s.p173)(i,a),c),r)}function f(t,i,n=new o.p16){return(0,s.p133)(i,e.default.up)?(0,s.p25)(n,t.x,0,t.z):(0,s.p126)(t,(0,s.p100)(t,i,a),n)}function p(t,i,e,r,h={changed:!1,clampValue:0},u=new o.p16){if(h.changed=!1,h.clampValue=1,e<=0)return(0,s.p24)(u,t);if(e>=1)return h.changed=!0,(0,s.p24)(u,i);const c=1-(0,s.p105)(i,t)/180;if(c>e)return h.clampValue=0,(0,s.p24)(u,t);h.changed=!0;const a=e>0?n.default.p43(1-(e-c)/(1-c),0,1):1;let l=e>0?n.default.p43(c/e,0,1):1;for(let t=0;t<r;t++){const t=l*n.default.p75*.5;l=n.default.p55(t)}const f=l*a;return h.clampValue=1-f,s.default.p138(i,t,f,u)}i.p340=l,i.p339=f,i.p338=p,i.p337={p343:r,p203:h,p342:u,p341:c,p339:f,p340:l,p338:p},i.default=i.p337})),window.___requireResolver&&(window.___requireResolver(),delete window.___requireResolver);

var TouchJoystick=pc.createScript("touchJoystick");TouchJoystick.attributes.add("identifier",{type:"string",default:"joystick0",title:"Idenitifier",description:"A unique name for the joystick to refer to it by in the API. Joysticks are also buttons so this will also be the name of button in the API. It will give a warning in browser tools if the name is not unique."}),TouchJoystick.attributes.add("type",{type:"string",default:"fixed",enum:[{"Fixed in place":"fixed"},{"Move to first touch and fixed":"relative"},{"Move to first touch and drags":"drag"}],title:"Type",description:"Set type of behavior for the joystick."}),TouchJoystick.attributes.add("baseEntity",{type:"entity",title:"Base Entity",description:"Image Element Entity that shows the base of the joystick."}),TouchJoystick.attributes.add("nubEntity",{type:"entity",title:"Nub Entity",description:"Image Element Entity that shows the nub (top) of the joystick."}),TouchJoystick.attributes.add("axisDeadZone",{type:"number",default:10,title:"Axis Dead Zone",description:"The number of UI units from the position of the Base Entity where input is not registered."}),TouchJoystick.attributes.add("axisRange",{type:"number",default:50,title:"Axis Range",description:"The number of UI units from the position of the Base Entity that the Nub Entity can move to and is the maximum range"}),TouchJoystick.attributes.add("hideOnRelease",{type:"boolean",default:!1,title:"Hide on Release",description:"Will only show the joystick when the user is using it and will hide it on touch end. This is commonly used if you don't want the joystick to block what's being shown on screen."}),TouchJoystick.attributes.add("positionOnRelease",{type:"string",default:"stay",enum:[{Stay:"stay"},{Original:"original"},{"Last start":"lastStart"}],title:"Position on Release",description:"Where to move the joystick on release and can help keep the screen tidy so that there are clear areas to show the game and arrange controls."}),TouchJoystick.attributes.add("vibrationPress",{type:"number",default:0,title:"Vibration duration (ms)",description:"If the device supports vibration with 'Navigator.vibrate', it will vibrate for the duration set here on touch down.Set to 0 to disable."}),TouchJoystick.prototype.initialize=function(){window.touchJoypad&&void 0!==window.touchJoypad.sticks[this.identifier]?console.warn("Touch joystick identifier already used, please use another for Entity: "+this.entity.name):(this._originalLocalPosition=this.baseEntity.getLocalPosition().clone(),this._lastPointerDownPosition=new pc.Vec3,this._setAxisValues(0,0),this._inputDown=!1,this._pointerId=-1,this._canVibrate=!!navigator.vibrate,this._setButtonState(!1),this.on("state",(t=>{this._setEvents(t?"on":"off")})),this.on("destroy",(()=>{window.touchJoypad&&(window.touchJoypad.sticks[this.identifier]=void 0)})),this._setEvents("on"))},TouchJoystick.prototype._setEvents=function(t){this._setAxisValues(0,0),this._pointerDown=!1,this._pointerId=-1,this.baseEntity.enabled=!this.hideOnRelease,this.entity.element[t]("mousedown",this._onMouseDown,this),this.entity.element[t]("mousemove",this._onMouseMove,this),this.entity.element[t]("mouseup",this._onMouseUp,this),this.app.touch&&(this.entity.element[t]("touchstart",this._onTouchDown,this),this.entity.element[t]("touchmove",this._onTouchMove,this),this.entity.element[t]("touchend",this._onTouchUp,this),this.entity.element[t]("touchcancel",this._onTouchUp,this))},TouchJoystick.__uiPos=new pc.Vec2,TouchJoystick.prototype.screenToUi=function(t){const i=TouchJoystick.__uiPos,o=this.app.graphicsDevice.canvas.clientWidth,e=this.app.graphicsDevice.canvas.clientHeight;return i.x=t.x/o,i.y=t.y/e,i.mulScalar(2).subScalar(1),i.y*=-1,i},TouchJoystick.prototype._onMouseDown=function(t){t.id=0,this._onPointerDown(t),this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onMouseMove=function(t){t.id=0,this._onPointerMove(t),this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onMouseUp=function(t){t.id=0,this._pointerDown&&t.stopPropagation(),this._onPointerUp(t)},TouchJoystick.prototype._onTouchDown=function(t){if(this._pointerDown)return;const i=this._pointerDown;t.id=t.touch.identifier,this._onPointerDown(t),!i&&this._pointerDown&&t.stopPropagation()},TouchJoystick.prototype._onTouchMove=function(t){t.id=t.touch.identifier,this._onPointerMove(t),this._pointerDown&&t.stopPropagation(),t.event.preventDefault()},TouchJoystick.prototype._onTouchUp=function(t){this._pointerDown&&(t.id=t.touch.identifier,this._onPointerUp(t),t.stopPropagation()),t.event.preventDefault()},TouchJoystick.prototype._onPointerDown=function(t){const i=this.screenToUi(t);switch(this.type){case"drag":case"relative":this.baseEntity.setPosition(i.x,i.y,0),this.nubEntity.setLocalPosition(0,0,0),this._pointerDown=!0;break;case"fixed":this.nubEntity.setPosition(i.x,i.y,0),this._updateAxisValuesFromNub(),this._pointerDown=!0}this._pointerDown&&(this._canVibrate&&0!==this.vibrationPress&&navigator.vibrate(this.vibrationPress),this._pointerId=t.id?t.id:0,this._setButtonState(!0),this._lastPointerDownPosition.copy(this.baseEntity.getLocalPosition()),this.baseEntity.enabled=!0,this._onPointerMove(t))},TouchJoystick.__tempNubPos=new pc.Vec3,TouchJoystick.__tempBasePos=new pc.Vec3,TouchJoystick.prototype._onPointerMove=function(t){if(this._pointerDown&&this._pointerId==t.id){const i=this.screenToUi(t),o=this.axisRange*this.axisRange;this.nubEntity.setPosition(i.x,i.y,0);const e=TouchJoystick.__tempNubPos;e.copy(this.nubEntity.getLocalPosition());if(e.lengthSq()>=o){if("drag"===this.type){const t=e.length()-this.axisRange,i=TouchJoystick.__tempBasePos;i.copy(e),i.normalize().mulScalar(t),i.add(this.baseEntity.getLocalPosition()),this.baseEntity.setLocalPosition(i)}e.normalize().mulScalar(this.axisRange),this.nubEntity.setLocalPosition(e)}this._updateAxisValuesFromNub()}},TouchJoystick.prototype._onPointerUp=function(t){if(this._pointerDown&&this._pointerId==t.id){switch(this.nubEntity.setLocalPosition(0,0,0),this.hideOnRelease&&(this.baseEntity.enabled=!1),this.positionOnRelease){case"original":this.baseEntity.setLocalPosition(this._originalLocalPosition);break;case"lastStart":this.baseEntity.setLocalPosition(this._lastPointerDownPosition)}this._pointerId=-1,this._updateAxisValuesFromNub(),this._setButtonState(!1),this._pointerDown=!1}},TouchJoystick.prototype._updateAxisValuesFromNub=function(){const t=this.axisRange-this.axisDeadZone,i=this.nubEntity.getLocalPosition(),o=Math.sign(i.x),e=Math.sign(i.y),s=pc.math.clamp(Math.abs(i.x)-this.axisDeadZone,0,t)*o,n=pc.math.clamp(Math.abs(i.y)-this.axisDeadZone,0,t)*e;this._setAxisValues(s/t,n/t)},TouchJoystick.prototype._setAxisValues=function(t,i){window.touchJoypad&&(window.touchJoypad.sticks[this.identifier]={x:t,y:i}),this.axisX=t,this.axisY=i},TouchJoystick.prototype._setButtonState=function(t){window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=t?Date.now():null),this._state=t};!function(){const t={},n={},o={buttons:{isPressed:function(t){return!!n[t]},wasPressed:function(o){const e=n[o],s=t[o];return void 0!==n[o]&&(!s&&e)},wasReleased:function(o){const e=n[o],s=t[o];return void 0!==n[o]&&(s&&!e)},wasTapped:function(n){if(this.wasReleased(n)){return Date.now()-t[n]<=200}return!1}},sticks:{}};o.buttonStates=n;pc.Application.getApplication().on("update",(()=>{for(const o of Object.keys(n)){const e=n[o];t[o]=e}})),window.touchJoypad=o}();var TouchButton=pc.createScript("touchButton");TouchButton.attributes.add("identifier",{type:"string",default:"button0",title:"Identifier",description:"A unique name for the button to refer to it by in the API. Will give a warning in browser tools if the name is not unique."}),TouchButton.attributes.add("vibration",{type:"number",default:0,title:"Vibration duration (ms)",description:"If the device supports vibration with 'Navigator.vibrate', it will vibrate for the duration set here on touch down.Set to 0 to disable."}),TouchButton.prototype.initialize=function(){window.touchJoypad&&void 0!==window.touchJoypad.buttonStates[this.identifier]?console.warn("Touch button identifier already used, please use another for Entity: "+this.entity.name):(this._canVibrate=!!navigator.vibrate,this._setState(!1),this.on("state",(t=>{this._setEvents(t?"on":"off")})),this.on("destroy",(()=>{window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=void 0)})),this._setEvents("on"))},TouchButton.prototype._setEvents=function(t){this._state=!1,this.entity.element[t]("mousedown",this._onMouseDown,this),this.entity.element[t]("mouseup",this._onMouseUp,this),this.app.touch&&(this.entity.element[t]("touchstart",this._onTouchDown,this),this.entity.element[t]("touchend",this._onTouchUp,this),this.entity.element[t]("touchcancel",this._onTouchUp,this))},TouchButton.prototype._onMouseDown=function(t){this._state||(this._onPointerDown(),t.stopPropagation())},TouchButton.prototype._onMouseUp=function(t){this._state&&(this._onPointerUp(),t.stopPropagation())},TouchButton.prototype._onTouchDown=function(t){this._state||(this._onPointerDown(),t.stopPropagation())},TouchButton.prototype._onTouchUp=function(t){this._state&&(this._onPointerUp(),t.stopPropagation()),t.event.preventDefault()},TouchButton.prototype._onPointerDown=function(){this._canVibrate&&0!==this.vibration&&navigator.vibrate(this.vibration),this._setState(!0)},TouchButton.prototype._onPointerUp=function(){this._setState(!1)},TouchButton.prototype._setState=function(t){window.touchJoypad&&(window.touchJoypad.buttonStates[this.identifier]=t?Date.now():null),this._state=t};